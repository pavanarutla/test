<style>
    .chat_box ul li{
        list-style: none;
    }
    .user_dec{
        background: #BC2535;
        padding: 5px 11px;
        color: #fff;
        margin-right: 15px;
    }
    .user_bi{

        background: #000;
        padding: 5px 10px;
        color: #fff;
        margin-right: 15px;
    }
</style>
<!-- share campaign sidenav -->
<md-sidenav
    class="md-sidenav-right md-whiteframe-z2 sidenav-width"
    md-component-id="shareCampaignSidenav"
    >
    <div layout="row">
        <div class="md-toolbar-tools">
            <div flex></div>
            <md-button
                class="md-icon-button"
                aria-label="Close Side Panel"
                ng-click="toggleShareCampaignSidenav()"
                >
                <md-tooltip>Close Side Panel</md-tooltip>
                <md-icon class="md-default-theme"
                         ><i class="material-icons">close</i></md-icon
                >
            </md-button>
        </div>
    </div>
    <md-content layout-align="center center" layout-margin layout-padding>
        <h3 class="md-headline">Share Campaign</h3>
        <form name="shareCampaignForm">
            <div layout="column">
                <md-input-container class="md-block">
                    <label>Name</label>
                    <input
                        ng-model="shareCampaign.receiver_name"
                        name="receiver_name"
                        required="required"
                        />
                    <div ng-messages="shareCampaignForm.name.$error">
                        <div ng-message="required">Name is required.</div>
                        <div ng-message="pattern">Enter a valid Name.</div>
                    </div>
                </md-input-container>
                <md-input-container class="md-block">
                    <label>Email</label>
                    <input
                        ng-model="shareCampaign.email"
                        name="email"
                        type="email"
                        required="required"
                        ng-pattern="/^[A-Za-z]+[A-Za-z0-9._-]+[A-Za-z0-9]+@[a-z0-9]+.[A-Za-z]{2,4}$/"
                        />
                    <div ng-messages="shareCampaignForm.email.$error">
                        <div ng-message="required">Email is required.</div>
                        <div ng-message="pattern">Enter a valid Email Id.</div>
                    </div>
                </md-input-container>
                <md-button
                    class="md-raised md-warn"
                    layout-fill
                    ng-click="shareCampaignToEmail($event, shareCampaign)"
                    >SHARE CAMPAIGN</md-button
                >
            </div>
        </form>
    </md-content>
</md-sidenav>
<!-- share campaign sidenav ends -->
<div class="bg-part">
    <div layout="row" flex="100" flex-sm="100" flex-xs="100" flex-md="100" layout-xs="column" layout-sm="column"
     layout-gt-sm="row" layout-margin="layout-margin" class="client-summay">
        <div layout="column" layuot-xs="column" layout-sm="column" layout-gt-sm="column" flex="50" flex-xs="100" flex-sm="100"
         flex-gt-sm="50" layout-margin="layout-margin" class="contbg md-whiteframe-3dp">
            <table class="table table-striped table-bordered" style="width: 98%;">
                <tbody>
                    <tr>
                        <td><b>Campaign ID</b></td>
                        <td>{{ campaignDetails.cid}}</td>
                    </tr>
                    <tr>
                        <td><b>Campaign Name</b></td>
                        <td>{{ campaignDetails.name | capitalize}}</td>
                    </tr>
                    <tr>
                        <td><b>Client Name</b></td>
                        <td>{{campaignDetails.first_name|| "N/A" | capitalize}}</td>
                    </tr>
                    <tr>
                        <td><b>Contact</b></td>
                        <td>{{campaignDetails.phone|| "N/A"}}</td>
                    </tr>
                    <tr>
                        <td><b>Email</b></td>
                        <td>{{campaignDetails.email|| "N/A" | capitalize}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div layout="column" flex="50" flex-xs="100" flex-sm="100" flex-gt-sm="50" layuot-xs="column" layout-sm="column"
         layout-gt-sm="column" layout-margin="layout-margin" class="contbg md-whiteframe-3dp">
            <table class="table table-striped table-bordered" style="width: 98%;">
                <tbody>
                    <tr>
                        <td><b>No of Products</b></td>
                        <td>{{ campaignDetails.products.length}}</td>
                    </tr>
                    <tr>
                        <td><b>Starting From</b></td>
                        <td>{{(campaignDetails.created_at | date: "dd-MM-yyyy") || "N/A"}}</td>
                    </tr>
                    <tr>
                        <td><b>Actual Budget</b></td>
                        <td>
                            <span ng-if="campaignDetails.act_budget">Rs.</span>{{TOTAL| number : 2 || "N/A"}}
                        </td>
                    </tr>
                    <tr>
                        <td><b>Pending payment</b></td>
                        <td>
                            <span ng-if="campaignDetails.pending_payment">Rs.</span>{{Totalamount || "N/A"}}
                        </td>
                    </tr>
                    <tr>
                        <td><b>Status</b></td>
                        <td>{{campaignDetails.status | stringifyCampaignStatus }}</td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
    <div layout="row" flex-offset-gt-md="70" flex="30" flex-xs="100" flex-sm="100" flex-gt-sm="50" layout-margin="layout-margin"
     style="float: right;">
        <div class="" style="cursor: pointer;">
            <div class="md-grid-item-content hoarding-btn" ng-class="{'red':selectedFormatIndex == 0}" ng-click="selectedFormatIndex = 0">
                <md-button class="dropbtn Upload_font" ng-click="downloadAdminQuote(campaignDetails.id)" download>
                    Download Quotation
                </md-button>
            </div>
        </div>
        <div class="">
            <div class="md-grid-item-content hoarding-btn">
                    <a href= "#/admin/campaign-payment-details/{{campaignDetails.id}}" ng-click="downloadOwnerQuote(campaignDetails.id)" download><md-button class="md-grid-item-content add_blue" ng-click="toggleAddMetroProductSidenav()" ng-disabled="metroCampDetails.status == 1121">
                    Payment Details
                </md-button>
                </a>
            </div>
        </div>
    </div>
</div>
<!-- <div ng-cloak flex="100" flex-xs="100" flex-sm="100"> -->
    <!-- <div class="ml-2 mr-2 mt-2 mb-2 md-whiteframe-2dp contbg">
        <div class="row" style="margin-left:0px; margin-right:0px;">
            <div
                class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-1 payment_mng"
                style="margin-top:14px;">
                <p class="cmp_bottom">Campaign ID</p>
                <p class="md-caption mob_span">
                    <b>{{ campaignDetails.cid}}</b>
                </p>
            </div>
            <div
                class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-3 payment_mng"
                style="margin-top:14px;">
                <p class="cmp_bottom">Campaign Name</p>
                <p class="md-caption mob_span">
                    <b>{{ campaignDetails.name | capitalize}}</b>
                </p>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-5 payment_nng" style="margin-top:14px;">
                <p class="cmp_bottom">No of Products</p>
                <p class="md-caption mob_span mob_5">
                    <b>{{ campaignDetails.products.length}}</b>
                </p>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-4 payment_nng"
                 style="cursor: pointer;">			
                <div class="md-grid-item-content hoarding-btn" ng-class="{'red':selectedFormatIndex == 0}" ng-click="selectedFormatIndex = 0">
                    <a ng-click="downloadAdminQuote(campaignDetails.id)" download>
                        <md-button class="dropbtn drop_width">
                            <p class="cmp_bottom md-caption" style="margin-bottom: 0px;"><span><i class="material-icons i_icondown">
                                        file_copy
                                    </i></span></p>
                            <p class="mob_spanicon share_icon" style="margin-bottom: 0px;">Download Quotation</p>
                        </md-button>
                    </a>
                </div>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-2 payment_nng"
                 style="cursor: pointer;">			
                <div class="md-grid-item-content hoarding-btn" ng-class="{'red':selectedFormatIndex == 0}" ng-click="selectedFormatIndex = 0">
                    <a href= "#/admin/campaign-payment-details/{{campaignDetails.id}}" ng-click="downloadOwnerQuote(campaignDetails.id)" download>
                        <md-button class="dropbtn drop_width">
                            <p class="cmp_bottom md-caption" style="margin-bottom: 0px;"><span><i class="material-icons i_icondown">
                                        account_balance_wallet
                                    </i></span></p>
                            <p class="mob_spanicon share_icon" style="margin-bottom: 0px;">Payment Details</p>
                        </md-button>
                    </a>
                </div>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-5 payment_nng" style="margin-top:14px;">
            </div>           
            <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-5 payment_nng" style="margin-top:14px;">
                <p class="cmp_bottom">Client Name</p>
                <p class="md-caption mob_span"><b>{{campaignDetails.first_name|| "N/A"}}</b></p>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-5 payment_nng" style="margin-top:14px;">

                <p class="cmp_bottom">Contact</p>
                <p class="md-caption mob_span"><b>{{campaignDetails.phone|| "N/A"}}</b></p>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-5 payment_nng" style="margin-top:14px;">
                <p class="cmp_bottom">Email</p>
                <p class="md-caption mob_span"><b>{{campaignDetails.email|| "N/A"}}</b></p>
            </div>
        </div>
    </div> -->
    <!-- table grid start  -->
    <div class="table-responsive">
        <table class="table">
            <thead class="text_color">
                <tr>
                    <th>Product Details</th>
                    <th class="hide-xs"></th>
                    <!-- <th class="">Size</th> -->
                    <th class="">Booked From</th>
                    <th class="">Booked To</th>
                    <th class="">Price Given</th>
                    <th class="">Price Received</th>
                    <th class="">Default Price</th>
                    <th class="">Inventory Owner</th>
                    <th class="">Inventory Status</th>
                    <th class="text-right"><md-button class="md-raised add_blue" ng-href="#/admin/add-campagin-product/{{campaignDetails.id}}" ng-hide="campaignDetails.status > 400">Add Another Product</md-button></th>
            </tr>
            </thead>
            <tbody>
                <tr
                    ng-repeat="campaignProduct in campaignProducts| limitTo:limit"
                    ng-class="{'striked-out': campaignProduct.unavailable}"
                    >
                    <td class="hide-xs image_tdwidth">
                        <img
                            ng-src="{{serverUrl + campaignProduct.image}}"
                            alt="Smiley face"
                            class="requ_size img-thumbnail"
                            />
                    </td>
                    <td class="table_address">
                        <p class="">
                            <b>{{ campaignProduct.siteNo}} - {{ campaignProduct.area_name}}
                                {{ campaignProduct.panelSize}}</b><br />Address : {{ campaignProduct.address}} <br />Views :
                            {{ "N/A"}} Per week<br />
                            <!-- Live Traffic:<button class="btn" style="background:#FF0A25; color:#fff; margin-left:10px;"><i class="fa fa-eye"></i>1,25,589</button> -->
                        </p>
                    </td>
                    <!-- <td class="table_vertical">60*60</td> -->
                    <td class="table_vertical">
                        <p>{{ campaignProduct.booked_from | date }}</p>
                    </td>
                    <td class="table_vertical">
                        <p>{{ campaignProduct.booked_to | date }}</p>
                    </td>
                    <td class="table_vertical table_price">
                        {{(!myfield) ? (campaignProduct.admin_price || 'N/A') : ''}}
                        <input type="text" class="" ng-model="campaignProduct.admin_price" placeholder="Price" ng-if="myfield" style="width: 70px;padding: 4px 5px;" />
                        <span ng-click="myfield = true;"  ng-show="(!myfield && campaignDetails.status <= 600)"> <i class="material-icons">edit</i></span>
                        <span ng-click="myfield = false;changeCampaignProductPrice(campaignProduct.campaign_id, campaignProduct.admin_price, campaignProduct.product_id, campaignProduct.id)"  ng-show="myfield"> <i class="material-icons">check</i></span>
                    </td>
                    <td class="table_vertical">
                        {{campaignProduct.owner_price|| 'N/A'}}                       
                    </td>
                    <td class="table_vertical">
                        {{campaignProduct.default_price|| 'N/A'}}                       
                    </td>
                    <td class="table_vertical">
                        <p class=" md-caption">{{campaignProduct.client_name}}</p>
                        <!-- <a href="#"><i class="material-icons">delete_foreve</i></a> -->
                    </td>
                    <td class="table_vertical addcampaign_details">
                        <p class="text_color md-caption" ng-if=" !campaignProduct.admin_price && campaignDetails.status >= 300 && campaignDetails.status <= 500">Quote Requested</p>
                        <p class="text_color md-caption" ng-if=" campaignProduct.admin_price && campaignDetails.status >= 300 && campaignDetails.status <= 600">{{campaignDetails.status| stringifyCampaignStatus}} </p>
                        <!--<p class="text_color md-caption" ng-if="!campaignProduct.admin_price && (campaignDetails.status <= 300 || campaignDetails.status >= 500)">Deleted</p>-->
                        <p class="text_color md-caption" ng-if="campaignProduct.admin_price && (campaignDetails.status <= 300 || campaignDetails.status > 600)">{{campaignProduct.product_status| stringifyProductStatus}}</p>
                    </td>
                    <td class=""></td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- table grid end -->

    <div class="row" style="border-top: 1px solid #ddd; margin-right:20px;">
        <div class="col-md-4 comment_mob">
            <div class="mt-3 ml-2 form-group">
                <form name="SendComment">
                    <div class=" chat_box ">
                        <ul ng-repeat="quote_change in campaignDetails.quote_change" class="p-2">
                            <li ng-if="quote_change.type == 'User'" class="mt-2"><span class="user_dec">U</span>{{quote_change.remark}}</li>
                            <li ng-if="quote_change.type == 'Admin'"><span class="user_bi">BI</span>{{quote_change.remark}}</li>
                        </ul>
                        <div class="form-group">
                            <label for="text" class="text_color">Any questions, Please submit below</label>
                            <textarea type="text" ng-model="campaignDetails.message" class="form-control" id="text" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn user_submit float-right" ng-click="changeQuoteRequest(campaignDetails.id, campaignDetails.message, 'Admin')">Submit</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-md-8">
            <div class="mt-3 pull-right" style="font-size: 13px;">
                <div>
                <p class="font-weight-light" style="text-indent: 53px;"><b>Total : <span class="float-right">{{campaignDetails.act_budget}}</b></span>
                </p>
                <!-- <p class="text_color" style="text-indent: 31px;">18% GST : <spam class="float-right">{{campaignDetails.gst}}</spam></p> -->
                <p class="text_color" style="text-indent: 17px;">
                                        <input type="checkbox" ng-hide="onchecked==false || true" ng-model="checked" ng-init="checked = true" ng-change="uncheck(checked)" />
                        18% GST : <span class="float-right">{{ GST |number : 2 ||"N/A" }}</span></p>
                
                <p class="" style="font-size: 15px;font-weight: 500;">Grand Total : <span class="float-right">{{ TOTAL || "N/A" }}</span></p>
            </div>
                <md-button
                    class="md-raised md-warn all_button"  
                    ng-click="finalizeCampaign(campaignProduct)"
                    ng-if="campaignDetails.status == 300" style="float:right;">
                    Send Quote
                </md-button>
                <md-button
                    class="md-raised"  
                    ng-if="campaignDetails.status == 400" style="float:right;" disabled="disabled">
                    Quote Sent
                </md-button>
                <md-button
                    class="md-raised md-primary all_button"
                    ng-if="campaignDetails.status == 600"
                    ng-click="launchCampaign(campaignDetails.id, $event)" style="float:right;">
                    Confirm Booking
                </md-button>
                <md-button
                    class="md-raised md-primary"
                    ng-if="campaignDetails.status >= 700" ng-disabled="true" style="float:right;">
                    Launched
                </md-button>
            </div>
        </div>
    </div>

<!-- </div> -->
<script>
    function addPayment() {
        document.getElementById("myDropdown").classList.toggle("show");
    }
    function addPayments() {
        document.getElementById("myDropdownView").classList.toggle("show");
    }
</script>