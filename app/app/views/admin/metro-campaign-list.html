<md-sidenav class="md-sidenav-right md-whiteframe-z2 scrollbar__style" md-component-id="metroAddCmapginSidenav">
	<md-toolbar layout="row">
		<div class="md-toolbar-tools" style="background:#414143 !important">
			<h2>
				<span>Create Metro Campaign</span>
			</h2>
			<span flex></span>
			<md-button class="md-icon-button" aria-label="Close Side Panel" ng-click="AddMetroCampaign()">
				<md-tooltip>Close Side Panel</md-tooltip>
				<md-icon class="md-default-theme">
					<i class="material-icons">close</i>
				</md-icon>
			</md-button>
		</div>
	</md-toolbar>
	<md-content layout-padding="">
		<form name="metroCampaignForm" role="form">
			<div class="form-group">
				<label class="control-label">Campaign Name</label>
				<br>
				<input ng-model="metroCampaign.name" name="campaign_name" class="form-control" type="text" required>
				<div ng-messages="metroCampaignForm.campaign_name.$error" ng-if="metroCampaignForm.campaign_name.$touched" style="color:red">
					<div ng-message="required">Campaign name is required.</div>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label">Organization Name</label>
				<br>
				<input ng-model="metroCampaign.org_name" name="org_name" class="form-control" type="text" required>
				<div ng-messages="metroCampaignForm.org_name.$error" ng-if="metroCampaignForm.org_name.$touched" style="color:red">
					<div ng-message="required">Organization name is required.</div>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label">Contact Name</label>
				<br>
				<input ng-model="metroCampaign.org_contact_name" name="org_contact_name" class="form-control" type="text" required>
				<div ng-messages="metroCampaignForm.org_contact_name.$error" ng-if="metroCampaignForm.org_contact_name.$touched" style="color:red">
					<div ng-message="required">Contact name is required.</div>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label">Email:</label>
				<input ng-model="metroCampaign.org_contact_email" name="org_contact_email" class="form-control" type="text" required ng-pattern="/^[A-Za-z]+[A-Za-z0-9._-]+[A-Za-z0-9]+@[a-z0-9]+.[A-Za-z]{2,4}$/">
				<div ng-messages="metroCampaignForm.org_contact_email.$error" ng-if="metroCampaignForm.org_contact_email.$touched" style="color:red">
					<div ng-message="required">Email is required.</div>
					<div ng-message="maxlength">Email shouldn't exceed 50 characters. </div>
					<div ng-message="pattern">Enter a valid Email</div>
				</div>
			</div>
			<div class="form-group">
				<label class="control-label">Phone Number</label>
				<br>
				<input ng-model="metroCampaign.org_contact_phone" only-numeric name="org_contact_phone" class="form-control" type="text" minlength="10" maxlength="10" required ng-pattern="/^\+?\d{2}[- ]?\d{3}[- ]?\d{5}$/">
				<div ng-messages="metroCampaignForm.org_contact_phone.$error" ng-if="metroCampaignForm.org_contact_phone.$touched" style="color:red">
					<div ng-message="required">Phone number is required.</div>
				</div>
			</div>
			<div class="form-group" style="margin:10px 0">
				<label class="col-md-3 control-label"></label>
				<input class="btn btn-primary" ng-click="saveMetroCampaign(metroCampaign)" ng-disabled="metroCampaignForm.$invalid" value="Save" type="button">
				<span></span>
				<input class="btn btn-default" value="Reset" type="reset">
			</div>
		</form>
	</md-content>
</md-sidenav>
<div layout="column" layout-fill="layout-fill">
	<md-tabs md-dynamic-height>
		<md-tab label="User Metro Campaigns">
			<div layout="colmun">
				<div id="CampaignSsearchInput" style="margin:8px;" layout-align="center start" layout="column" flex="40">
					<md-autocomplete ng-disabled="isDisabled" md-selected-item="campaignSelectedItem" md-search-text-change="campaignSearchTextChange(campaignSearchText)"
					 md-search-text="campaignSearchText" md-selected-item-change="viewSelectedCampaign(campaign)" md-items="campaign in campaignSearch(campaignSearchText)"
					 md-item-text="campaign.name" md-min-length="4" placeholder="Search..." style="width:100%" md-clear-button="true">
						<md-item-template>
							<span class="item-title">
								<span> {{campaign.name}} </span>
							</span>
							<span class="item-metadata">
								<span>
									<strong>{{campaign.first_name}} {{campaign.last_name}}</strong>
								</span>
								<span>
									<strong>{{campaign.email}}</strong>
								</span>
								<span>
									<strong>{{campaign.phone}}</strong>
								</span>
							</span>
						</md-item-template>
						<md-not-found>
							No matches found.
						</md-not-found>
					</md-autocomplete>
				</div>
				<span flex></span>
				<!-- <md-button class="md-raised md-warn" ng-click="AddMetroCampaign()">
					Add New Metro Campaign
					<span>
						<md-icon md-svg-icon="assets/images/finalise.svg"></md-icon>
					</span>
				</md-button> -->
			</div>
			<div style="margin-top: 1em;">
				<div class="table-responsive">
					<table class="table table-striped table-bordered ">
						<thead>
							<tr>
								<th>Campaign Name</th>
								<th>Client Name</th>
								<th>Client contact</th>
								<th>Email</th>
								<th>Status</th>
								<th>Created On</th>
								<th>Actions</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="uMetrCamp in userMetroCampaigns">
								<td>{{uMetrCamp.name}}</td>
								<td>{{uMetrCamp.user_details.first_name}} {{uMetrCamp.user_details.last_name}}</td>
								<td>{{uMetrCamp.user_details.phone}}</td>
								<td>{{uMetrCamp.user_details.email}}</td>
								<td>{{uMetrCamp.status | stringifyCampaignStatus }}</td>
								<td>{{uMetrCamp.created_at | date:'MMM d, y HH:mm:ss'}}</td>
								<td>
									<span>
										<a ng-href="#/admin/metro-campaign/{{uMetrCamp.id}}">
											<md-icon>
												<i class="material-icons">mode_edit</i>
											</md-icon>
										</a>
									</span>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</md-tab>
		<md-tab label="Admin Metro Campaigns">
			<div layout="colmun">
				<div id="CampaignSsearchInput" style="margin:8px;" layout-align="center start" layout="column" flex="40">
					<md-autocomplete ng-disabled="isDisabled" md-selected-item="campaignSelectedItem" md-search-text-change="campaignSearchTextChange(campaignSearchText)"
					 md-search-text="campaignSearchText" md-selected-item-change="viewSelectedCampaign(campaign)" md-items="campaign in campaignSearch(campaignSearchText)"
					 md-item-text="campaign.name" md-min-length="4" placeholder="Search..." style="width:100%" md-clear-button="true">
						<md-item-template>
							<span class="item-title">
								<span> {{campaign.name}} </span>
							</span>
							<span class="item-metadata">
								<span>
									<strong>{{campaign.first_name}} {{campaign.last_name}}</strong>
								</span>
								<span>
									<strong>{{campaign.email}}</strong>
								</span>
								<span>
									<strong>{{campaign.phone}}</strong>
								</span>
							</span>
						</md-item-template>
						<md-not-found>
							No matches found.
						</md-not-found>
					</md-autocomplete>
				</div>
				<span flex></span>
				<md-button class="md-raised md-warn" ng-click="AddMetroCampaign()">
					Add New Metro Campaign
					<span>
						<md-icon md-svg-icon="assets/images/finalise.svg"></md-icon>
					</span>
				</md-button>
			</div>
			<div style="margin-top: 1em;">
				<div class="table-responsive">
					<table class="table table-striped table-bordered ">
						<thead>
							<tr>
								<th>Campaign Name</th>
								<th>Client Name</th>
								<th>Client contact</th>
								<th>Email</th>
								<th>Status</th>
								<th>Created On</th>
								<th>Actions</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="aMetrCamp in adminMetroCampaigns">
								<td>{{aMetrCamp.name}}</td>
								<td>{{aMetrCamp.org_contact_name}}</td>
								<td>{{aMetrCamp.org_contact_phone}}</td>
								<td>{{aMetrCamp.org_contact_email}}</td>
								<td>{{aMetrCamp.status | stringifyCampaignStatus }}</td>
								<td>{{aMetrCamp.created_at | date:'MMM d, y HH:mm:ss'}}</td>
								<td>
									<span>
										<a ng-href="#/admin/metro-campaign/{{aMetrCamp.id}}">
											<md-icon>
												<i class="material-icons">mode_edit</i>
											</md-icon>
										</a>
									</span>
									<a style="cursor:pointer;" ng-click="deleteMetroCampaign(aMetrCamp.id)">
										<md-icon>
											<i class="material-icons">delete</i>
										</md-icon>
									</a>
									</span>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</md-tab>
	</md-tabs>
</div>