<style>
	.md-button {
		min-width: 64px !important;
	}
	md-list-item {
		padding: 0 0px !important;
	}
</style>
<!-- ============ add hoarding list side nav start ============ -->
<md-sidenav class="md-sidenav-right md-whiteframe-z2 scrollbar__style" md-component-id="add-metro-product-sidenav" style="width:400px !important">
	<md-toolbar layout="row">
		<div class="md-toolbar-tools bg_main_color" style="background:#414143 !important">
			<h2>
				<span>Add Product</span>
			</h2>
			<span flex></span>
			<md-button class="md-icon-button" aria-label="Close Side Panel" ng-click="toggleAddMetroProductSidenav()()">
				<md-tooltip>Close Side Panel</md-tooltip>
				<md-icon class="md-default-theme">
					<i class="material-icons" style="color:#fff !important;">close</i>
				</md-icon>
			</md-button>
		</div>
	</md-toolbar>
	<md-content layout-padding="">
		<form role="form" name="metroPackagesCampaigns">
			<div class="form-group row">
				<label for="productType" class="col-sm-4 col-form-label">Product Type</label>
				<div class="col-sm-8">
						<select name="package" class="form-control" id="package" ng-model="selectedFormat" ng-options="foramt as format.name for format in formatList" required>
							<!-- <option value="" disabled selected>Select Format</option> -->
						</select>
				</div>
			</div>
			<div class="form-group row">
				<label for="area" class="col-sm-4 col-form-label">Select Corridor</label>
				<div class="col-sm-8">
					<select name="corridor" class="form-control" id="corridor" ng-model="selectedCorridor" ng-options="corr as corr.name for corr in metroCorridorList" ng-change="getMetroPackages(selectedCorridor.id)" required>
					</select>
				</div>
			</div>
			<div class="form-group row">
					<label for="pack" class="col-sm-4 col-form-label">Packages</label>
					<div class="col-sm-8">
							<select name="corridor" class="form-control"  ng-model="selectedPackage" ng-options="pkg as pkg.name for pkg in metroPackages"  required>
							</select>
					</div>
				</div>
				<div class="form-group row">
					<label for="pack" class="col-sm-4 col-form-label">Months</label>
					<div class="col-sm-8">
						<!--	<select  class="form-control"  ng-model="selectedPackage.days"   required>
									<option value = "" disabled>Days</option>
									<option value = "7" ng-selected="true">7 Days</option>
									<option value = "14">14 Days</option>
									<option value = "28">28 Days</option>
									<option value = "60">60 Days</option>
									<option value = "90">90 Days</option>
							</select>-->
							<select  class="form-control"  ng-model="selectedPackage.months" ng-options="opt.label for opt in monthoptions"   required>
								
							</select>
							<!--<input type="number" ng-model="selectedPackage.months" value= "1" min ="1" max="12" required class="form-control">-->
					</div>
				</div>
			
			<div class="form-group row">
				<label for="hoardingLight" class="col-sm-4 col-form-label">No. Of Trains</label>
				<div class="col-sm-8">
					<input class="form-control" type='number' ng-model="selectedPackage.selected_trains" max="{{selectedPackage.max_trains}}" min="1" />
				</div>
			</div>
		<!--	<div class="form-group row" >
				<label for="" class="col-sm-4 col-form-label">No. Of Slots</label>
				<div class="col-sm-8">
						{{selectedPackage.max_slots * selectedPackage.days}}
				</div>
			</div> --> 
			<div class="form-group row">
				<label for="" class="col-sm-4 col-form-label">Select Date</label>
				<div flex-gt-xs="">
					<md-datepicker ng-model="selectedPackage.start_date" onkeydown="return false" md-placeholder="Start date" md-min-date="newDate"></md-datepicker>
				</div>
			</div>
			<div class="form-group row">
				<label for="productId" class="col-sm-4 col-form-label">Price</label>
				<div class="col-sm-8">
					
					<div style="padding-top:6px;">{{ selectedPackage.price_new = (selectedPackage.price * selectedPackage.months.value * selectedPackage.selected_trains) || "N/A"}}</div>
				</div>
			</div>
			<div class="form-group" style="margin:10px 0">
				<label class="col-md-3 control-label"></label>
				<!-- <input class="btn btn-primary" value="Save" type="button"  ng-click="addPackageInMetroCampaign(admin_selected_slots,admin_price)"> -->
				<md-button class="md-raised all_button" ng-click="addPackageInMetroCampaign(admin_selected_slots,admin_price)">Save</md-button>
				<span></span>
				<!-- <input class="btn btn-default" value="Cancel" type="button" ng-click="toggleAddMetroProductSidenav()"> -->
				<md-button class="md-raised Upload_font" ng-click="toggleAddMetroProductSidenav()">Cancel</md-button>
			</div>
		</form>
	</md-content>
</md-sidenav>
<!-- ============ add hoarding list side nav end ============ -->
<div ng-cloak flex-xs="100" flex-sm="100" flex-md="100">
	<div layout="column" layout-sm="column" layout-xs="column">
		<div class="bg-part">
			<div layout="row" layout-xs="column" layout-sm="column" layout-gt-sm="row" layout-margin="layout-margin" class="client-summay">
				<div layout="column" layuot-xs="column" layout-sm="column" layout-gt-sm="column" flex="50" flex-xs="100" flex-sm="100" flex-gt-sm="50"
				 layout-margin="layout-margin" class="contbg md-whiteframe-3dp client_info">
					<!-- <div layout="column" layout-align="center center" layout-margin>
						<div>
							<img src="assets/images/client_details.png" width="70%">
						</div>
						<h3 class="text_color">Client Details</h2>
					</div> -->
					<table class="table table-striped table-bordered camp_tablewidth">
						<tbody>
							<tr>
								<td><b>Campaign Name</b></td>
								<td>{{metroCampaignDetails.name | capitalize}}</td>
							</tr>
							<tr>
								<td><b>Client Name</b></td>
								<td ng-if="metroCampaignDetails.type == 0">{{metroCampaignDetails.user_details.first_name || "N/A" | capitalize}} {{metroCampaignDetails.user_details.last_name | capitalize}}</td>
								<td ng-if="metroCampaignDetails.type == 1">{{metroCampaignDetails.org_contact_name || "N/A" | capitalize}}</td>
							</tr>
							<tr>
								<td><b>Contact</b></td>
								<td ng-if="metroCampaignDetails.type == 0">{{metroCampaignDetails.user_details.phone || "N/A"}}</td>
								<td ng-if="metroCampaignDetails.type == 1">{{metroCampaignDetails.org_contact_phone || "N/A"}}</td>
							</tr>
							<tr>
								<td><b>Email</b></td>
								<td ng-if="metroCampaignDetails.type == 0">{{metroCampaignDetails.user_details.email || "N/A" | capitalize}}</td>
								<td ng-if="metroCampaignDetails.type == 1">{{metroCampaignDetails.org_contact_email || "N/A" | capitalize}}</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div layout="column" flex="50" flex-xs="100" flex-sm="100" flex-gt-sm="50" layuot-xs="column" layout-sm="column" layout-gt-sm="column"
				 layout-margin="layout-margin" class="contbg md-whiteframe-3dp Campaign_summary">
					<!-- <div layout="column" layout-align="center center" layout-margin>
						<div>
							<img src="assets/images/capaign_details.png" width="70%">
						</div>
						<h3 class="text_color">Campaign Summary</h2>
					</div> -->
					<table class="table table-striped table-bordered camp_tablewidth">
						<tbody>
							<tr>
								<td><b>Starting From</b></td>
								<td>{{metroCampaignDetails.start_date | dateify | date:'dd-MM-yyyy' || "N/A"}}</td>
							</tr>
							<tr>
								<td><b>Actual Budget</b></td>
								<td>
									<span ng-if="metroCampaignDetails.act_budget">Rs. </span>{{TOTAL || "N/A"}}
								</td>
							</tr>
							<tr>
								<td><b>Pending payment</b></td>
								<td>
									<span ng-if="!metroCampaignDetails">N/A</span>
									<span ng-if="metroCampaignDetails && metroCampaignDetails.act_budget">Rs. {{metroCampaignDetails.pending_payment}}</span>
									<span ng-if="metroCampaignDetails && !metroCampaignDetails.act_budget">N/A</span>
								</td>
							</tr>
							<tr>
								<td><b>Status</b></td>
								<td>{{metroCampaignDetails.status | stringifyCampaignStatus }}</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<div layout="row" layout-xs="column" layout-sm="column" layout-gt-sm="row" layout-margin="layout-margin" class="client-summay"
			 ng-if="metroCampaignDetails.pending_payment < metroCampaignDetails.act_budget">
				<div layout="column" layuot-xs="column" layout-sm="column" layout-gt-sm="column" flex="50" flex-xs="100" flex-sm="100" flex-gt-sm="50"
				 layout-margin="layout-margin" class="contbg md-whiteframe-3dp">
					<div layout="column" layout-align="center center">
						<h3>Payment Details</h2>
					</div>
					{{campaignMetroPayments.totalamount}}
					<div layout="row">
						<div flex="50" layout="column" layout-align="center center">Total amount:</div>
						<div flex="50" layout="column" layout-align="center center">Rs. {{campaignMetroPayments.campaign_details.totalamount}}</div>
					</div>
					<div layout="row">
						<div flex="50" layout="column" layout-align="center center">Paid Amount:</div>
						<div flex="50" layout="column" layout-align="center center">Rs. {{campaignMetroPayments.total_paid || 0 }}</div>
					</div>
					<div layout="row" ng-if="campaignMetroPayments.total_paid < TOTAL">
						<div flex="100" layout="column" layout-align="center center">
							<md-button Class="md-raised md-primary all_button" type="submit" ng-click="showConfirmMetroPaymentPopup()">
								Update Payment
							</md-button>
						</div>
					</div>
				</div>
				<div layout="column" flex="50" flex-xs="100" flex-sm="100" flex-gt-sm="50" layuot-xs="column" layout-sm="column" layout-gt-sm="column"
				 layout-margin="layout-margin" class="contbg md-whiteframe-3dp">
					<div layout="column" layout-align="center center">
						<h3>Recently Updated Payments</h2>
					</div>
					<div layout="column" layout-margin style="height:150px; overflow:auto;">
						<div layout="row">
							<div flex="20" layout="column" layout-align="center center">Date</div>
							<div flex="20" layout="column" layout-align="center center">Amount</div>
							<div flex="20" layout="column" layout-align="center center">Txn Type</div>
							<div flex="20" layout="column" layout-align="center center">Ref. No.</div>
							<div flex="20" layout="column" layout-align="center center">Accepted by</div>
						</div>
						<div layout="row" ng-if="!campaignMetroPayments">
							<div flex="20" layout="column" layout-align="center center">N/A</div>
							<div flex="20" layout="column" layout-align="center center">Rs. 0</div>
							<div flex="20" layout="column" layout-align="center center">N/A</div>
							<div flex="20" layout="column" layout-align="center center">N/A</div>
							<div flex="20" layout="column" layout-align="center center">N/A</div>
						</div>
						<div layout="row" ng-repeat="payment in campaignMetroPayments.all_payments">
							<div flex="20" layout="column" layout-align="center center">{{payment.updated_at | dateify | date: "dd/MM/yyyy"}}</div>
							<div flex="20" layout="column" layout-align="center center">{{"Rs." + payment.amount }}</div>
							<div flex="20" layout="column" layout-align="center center">{{payment.type }}</div>
							<div flex="20" layout="column" layout-align="center center">{{payment.reference_no || "N/A"}}</div>
							<div flex="20" layout="column" layout-align="center center">{{payment.received_by || "N/A" }}</div>
						</div>
					</div>
					
				</div>
			</div> 
		</div>
		<!-- <div layout="row" layout-margin>
			<div flex="100" layout="row" layout-xs="column" layout-sm="row" layout-gt-sm="row" layout-align="end center">
				<md-button class="md-raised md-warn all_gary" ng-disabled="!metroCampaignDetails || metroCampaignDetails.status > 1101" ng-click="toggleAddMetroProductSidenav()">
					Add New Product
				</md-button>
				<md-button ng-disabled=" campaignMetroPayments.total_paid <= TOTAL || (metroCampaignDetails.type !=1 && metroCampaignDetails.status == 1101 )" class="md-raised md-warn all_gary" ng-click="showConfirmMetroPaymentPopup()">
					Update Payment 
				</md-button>
				<md-button class="md-raised md-warn all_gary" ng-disabled="!metroCampaignDetails || (metroCampaignDetails.status != 1131)" ng-click="launchMetroCampaign(metroCampaignDetails.id, $event)">
					Launch Campaign
				</md-button>
				<md-button class="md-raised md-warn all_gary" ng-disabled="!metroCampaignDetails || metroCampaignDetails.status != 1141" ng-click="closeMetroCampaign(metroCampaignDetails.id)">
					Close Campaign
				</md-button>
			</div>
		</div> -->
		<div class="row" style="margin-left:0px; margin-right:0px;">
			<div class="row col-xl-12 col-lg-12 col-md-12 col-sm-6 col-12" style="float: right;">
				<div class="offset-xl-8 col-xl-1 col-lg-2 col-md-2 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-1">
					<md-button class="md-raised md-warn all_gary" ng-disabled="!metroCampaignDetails || metroCampaignDetails.status > 1101" ng-click="toggleAddMetroProductSidenav()">
						Add New Product
					</md-button>
				</div>
				<div class="col-xl-1 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-2">
					<md-button ng-disabled=" campaignMetroPayments.total_paid <= TOTAL || (metroCampaignDetails.type !=1 && metroCampaignDetails.status == 1101 )" class="md-raised md-warn all_gary" ng-click="showConfirmMetroPaymentPopup()">
						Update Payment 
					</md-button>
				</div>
				<div class="col-xl-1 col-lg-2 col-md-2 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-3">
					<md-button class="md-raised md-warn all_gary" ng-disabled="!metroCampaignDetails || (metroCampaignDetails.status != 1131)" ng-click="launchMetroCampaign(metroCampaignDetails.id, $event)">
						Launch Campaign
					</md-button>
				</div>
				<div class="col-xl-1 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-4">
					<md-button class="md-raised md-warn all_gary" ng-disabled="!metroCampaignDetails || metroCampaignDetails.status != 1141" ng-click="closeMetroCampaign(metroCampaignDetails.id)">
						Close Campaign
					</md-button>
				</div>
			</div>
		</div>
		<div layout="row">
			<div flex="30">
				<h3 class="m-2 text_color" style="margin: 30px 0 0 0;font-size: 20px;">Products({{metroCampaignDetails.packages.length || 0}})</h3>
			</div>
		</div>
		
		<div class="table-responsive">
			<table class="table">
				<thead class="text_color">
					<tr>
						<th>Product Type</th>
						<th>Corridor</th>
						<th>No.of Trains</th>
						<!--<th>No.of Slots</th>-->
						<th>Durations</th>
						<th>Start Date</th>
						<th>Price</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="pkg in metroCampaignDetails.packages">
						<td class="table_vertical">{{pkg.package_name}}</td>
						<td class="table_vertical">{{pkg.corridor_name}}</td>
						<td class="table_vertical">{{pkg.selected_trains}}</td>
						<!--<td>{{pkg.selected_slots}}</td>-->
						<td class="table_vertical">{{((pkg.months == 0.5) ? '15 Days' : pkg.months+'Months')  }}</td>
						<td class="table_vertical">{{pkg.start_date | date: "dd-MM-yyyy"}}</td>
						<td class="table_vertical">{{pkg.price}}</td>
							 <!--<md-input-container class="md-block margin-input">
								  <md-icon md-svg-icon="assets/images/rupee.svg"></md-icon>
							    <input ng-model="pkg.price" type="text" name="price" required="required" ng-pattern="/[0-9]+/" ng-disabled="!enabledPrice" style="width: 30%"
									 />
									 <md-button class="md-primary" ng-click="enabledPrice = true;" ng-show="!enabledPrice"><i class="material-icons">edit</i></md-button>
							     <md-button class="md-primary" ng-click="updatePackagePrice(pkg.price,pkg)" ng-show="enabledPrice"><i class="material-icons">check</i></md-button>
							</md-input-container>-->
							
						
						<td class="table_vertical">
							<md-button class="md-icon-button" ng-disabled="(metroCampaignDetails.status != '1101' && metroCampaignDetails.status != '1121')" ng-click="updatePackagePrice(pkg.price,pkg)">
								<md-icon>
									<i class="material-icons">mode_edit</i>
								</md-icon>
							</md-button>
							<md-button class="md-icon-button" ng-if="metroCampDetails.status == 1101" ng-click="deleteProductFromCampaign(metroCampaignDetails.id, pkg.package_id)">
								<md-icon>
									<i class="material-icons">delete </i>
								</md-icon>
							</md-button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="row border_quest mr-0 ml-0 ">
			<div class="col-md-12">
					<!-- ng-if="metroCampDetails.status >= 1121" -->
				<!-- ng-if="metroCampDetails.type != 0" -->
				<div class="mt-3 pull-right" style="font-size: 13px;">
					<p class="font-weight-light" style="text-indent: 193px;"><b>Total : <span class="float-right">{{metroCampaignDetails.act_budget}}</b></span>
					</p>
					<p class="text_color" style="text-indent: 161px;">18% GST : <span class="float-right">{{ GST |number : 2 ||"N/A" }}</span></p>
					<p class="" style="text-indent: 143px;font-size: 15px;font-weight: 500;">Grand Total : <span class="float-right">{{
							TOTAL | number : 2}}</span>
					</p>
				</div>
			</div>
		</div>
	</div>
</div>