<md-sidenav class="md-sidenav-right md-whiteframe-z2 sidenav-width" md-component-id="shareCampaignSidenav">
  <div layout="row">
    <div class="md-toolbar-tools">
      <div flex></div>
      <md-button class="md-icon-button" aria-label="Close Side Panel" ng-click="toggleShareCampaignSidenav()">
        <md-tooltip>Close Side Panel</md-tooltip>
        <md-icon class="md-default-theme"><i class="material-icons">close</i></md-icon>
      </md-button>
    </div>
  </div>
  <md-content layout-align="center center" layout-margin layout-padding>
    <h3 class="md-headline">Share Campaign</h3>
    <form name="shareCampaignForm">
      <div layout="column">
        <md-input-container class="md-block">
          <label>Name</label>
          <input ng-model="shareCampaign.receiver_name" name="receiver_name" required="required" />
          <div ng-messages="shareCampaignForm.name.$error">
            <div ng-message="required">Name is required.</div>
            <div ng-message="pattern">Enter a valid Name.</div>
          </div>
        </md-input-container>
        <md-input-container class="md-block">
          <label>Email</label>
          <input ng-model="shareCampaign.email" name="email" type="email" required="required" ng-pattern="/^[A-Za-z]+[A-Za-z0-9._-]+[A-Za-z0-9]+@[a-z0-9]+.[A-Za-z]{2,4}$/" />
          <div ng-messages="shareCampaignForm.email.$error">
            <div ng-message="required">Email is required.</div>
            <div ng-message="pattern">Enter a valid Email Id.</div>
          </div>
        </md-input-container>
        <md-button class="md-raised md-warn all_button" layout-fill ng-click="shareCampaignToEmail($event, shareCampaign,currentOwnerShareCampaign)">Share
          Campaign</md-button>
      </div>
    </form>
  </md-content>
</md-sidenav>
<md-button aria-label="" ng-href="#owner/home" md-no-ink style="background:transparent" class="logo hs-lg hide-gt-md hide-md">
  <img ng-src="assets/images/owner/owner_logo.png" width="140" alt="owner logo">
</md-button>
<div class="ml-2 mr-2 mt-2 mb-2 md-whiteframe-2dp contbg">
  <div class="row" style="margin-left:0px; margin-right:0px;">
    <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-1 payment_mng"
      style="margin-top:14px;">
      <p class="">Campaign ID</p>
      <p class="md-caption mob_span"><b>{{campaignPaymentDetails.cid || "N/A"}}</b></p>
    </div>
    <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-3 payment_mng"
      style="margin-top:14px;">
      <p class="">Campaign Name</p>
      <p class="md-caption mob_span"><b>{{campaignPaymentDetails.name}}</b></p>
    </div>
    <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-5 payment_nng"
      style="margin-top:14px;">
      <p class="">No of Products</p>
      <p class="md-caption mob_span mob_5"><b>{{campaignPaymentDetails.product_count || "N/A"}}</b></p>
    </div>
    <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-2 payment_nng"
      style="margin-top:14px;">
      <div class="md-grid-item-content hoarding-btn" ng-class="{'red':selectedFormatIndex == 0}" ng-click="toggleShareCampaignSidenav(campaignPaymentDetails.id)">
        <p class="md-caption"><span><i class="material-icons i_icon">
              reply_all
            </i></span></p>
        <p class="mob_spanicon share_icon">Share Campaign</p>
      </div>
    </div>
    <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 order-4 payment_nng"
      style="margin-top:14px;">
      <div class="md-grid-item-content hoarding-btn" ng-class="{'red':selectedFormatIndex == 0}" ng-click="selectedFormatIndex = 0">
        <p class="md-caption"><span><i class="material-icons i_icondown">
              file_copy
            </i></span></p>
        <p class="mob_spanicon share_icon">Download Quotetation</p>
      </div>
    </div>
    <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4 col-6 order-xl-1 order-lg-1 order-md-1 order-sm-1 payment_nng hide-xs"
      style="margin-top:1em;">
      <div class="dropdown">
        <md-button class="md-raised md-primary all_button update_mrg" onclick="addPayment()" class="dropbtn">
          <md-icon style="width:1.5vw">
            <i class="material-icons update_accounticon">
              account_balance_wallet
            </i>
          </md-icon>
          Add Payment
        </md-button>
        <div id="myDropdown" class="dropdown-content contbg animated fadeInDown">
          <form name="forms.ownerCampaignForm" role="form" novalidate="novalidate">
            <div layout="colmun">
              <span flex></span>
              <md-button class="md-icon-button" aria-label="Close Side Panel" onclick="addPayment()">
                <md-icon class="md-default-theme">
                  <i class="material-icons">close</i>
                </md-icon>
              </md-button>
            </div>
            <h3 class="md-title" style="margin-top:-28px;">Grand Total : Rs. {{campaignPaymentDetails.act_budget}}</h3><br>
            <li>
              <div class="">
                <div class="col-md-12">
                  <form>
                    <div class="form-group row">
                      <label for="amount" class="col-sm-4 col-form-label md-body-2">Mode *:</label>
                      <div class="col-sm-8">
                        <select id="paymentType" ng-model="campaignPayment.type" class="form-control md-whiteframe-3dp">
                          <option ng-repeat="paymentType in paymentTypes" ng-value="{{paymentType.name}}">{{paymentType.name}}</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="paymentType" class="col-sm-4 col-form-label md-body-2">Amount</label>
                      <div class="col-sm-8">
                        <input type="text" class="form-control md-whiteframe-3dp" id="amount" ng-model="campaignPayment.amount">
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="paymentType" class="col-sm-4 col-form-label md-body-2">Reference No:</label>
                      <div class="col-sm-8">
                        <input type="text" class="form-control md-whiteframe-3dp" id="amount" ng-model="campaignPayment.reference_no">
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="amount" class="col-sm-4 col-form-label md-body-2">Campaign</label>
                      <div class="col-sm-8">
                        <!-- <input type="text" class="form-control md-whiteframe-3dp" id="amount" ng-model="campaignPayment.name"> -->
                        <select id="paymentType" ng-model="campaignPayment.campaign_id" class="form-control md-whiteframe-3dp">
                          <option ng-repeat="campaignForOwner in allCampaignsForOwner" ng-value="campaignForOwner.id">{{campaignForOwner.name}}</option>
                          <!-- <option selected>Select Payment Type</option> -->
                          <!-- <option ng-repeat="paymentType in paymentTypes" ng-value="{{paymentType.name}}">{{paymentType.name}}</option> -->
                        </select>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="paymentType" class="col-sm-4 col-form-label md-body-2">Received By *:</label>
                      <div class="col-sm-8">
                        <input type="text" class="form-control md-whiteframe-3dp" id="amount" ng-model="campaignPayment.received_by">
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="paymentType" class="col-sm-4 col-form-label md-body-2">Comments</label>
                      <div class="col-sm-8">
                        <textarea class="form-control md-whiteframe-3dp" rows="5" id="comment" name="text" placeholder="Type Your Massage"
                          ng-model="campaignPayment.comment"></textarea>
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="paymentType" class="col-sm-4 col-form-label md-body-2">Upload Image</label>
                      <div class="col-sm-8">
                        <span class="input-group-btn">
                          <span class="">
                            <input type="file" ngf-select ng-model="files.image" name="files.image" class="form-control md-whiteframe-3dp"
                              accept="image/*" ngf-max-size="1MB">
                          </span>
                        </span>
                        <div ng-messages="addProductForm.imageFile.$error" ng-if="addProductForm.imageFile.$touched"
                          style="color:red">
                          <div ng-message="required">Image is required.</div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group row">
                      <div flex></div>
                      <div class="col-sm-4">
                        <!-- <p><input type="file"  accept="image/*" name="image" id="file"  onchange="loadFile(event)" style="display: none;"></p>
                                   <p><label for="file" style="cursor: pointer;">Upload Image</label></p> -->
                      </div>
                      <div class="col-sm-4">
                        <md-button class="md-raised md-primary all_button pull-right text-white" ng-click="updateOwnerCampaignPayment()">Submit</md-button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </li>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="table-responsive">
  <table class="table table-hover">
    <thead class="text_color">
      <tr>
        <th>Date</th>
        <th>Mode of Payment</th>
        <th>Paid</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="payment in campaignPaymentDetails.payment_details">
        <td class="table_vertical">{{payment.updated_at | dateify | date: "dd-MMM-yyyy" || "N/A"}}</td>
        <td class="table_vertical">{{payment.type || "N/A"}}</td>
        <td class="table_vertical">{{payment.amount || "N/A"}}</td>
        <td class="table_vertical">21-09-2018, 9:00 Am</td>
      </tr>
    </tbody>
  </table>
</div>

<div style="margin-right:20px;">
  <div class="pull-right">
    <p class="font-weight-light" style="text-indent: 48px;">Total: {{campaignPaymentDetails.act_budget}}</p>
    <p class="text_color" style="text-indent: 50px;">Paid: {{paid}}</p>
    <h4>Balance: {{unpaid}}</h4>
  </div>
</div>
<script>
  function addPayment() {
    document.getElementById("myDropdown").classList.toggle("show");
  }
  function addPayments() {
    document.getElementById("myDropdownView").classList.toggle("show");
  }
</script>

<script>
  var loadFile = function (event) {
    var image = document.getElementById('output');
    image.src = URL.createObjectURL(event.target.files[0]);
  };
</script>