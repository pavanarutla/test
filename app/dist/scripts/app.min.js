app.controller("AdminLocationCtrl",["$scope","$http","AdminLocationService","toastr",function(e,t,i,n){e.countryList=[],e.stateListForCountry=[],e.cityListForState=[],e.gridLocation={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},e.gridLocation.columnDefs=[{name:"country_name",displayName:"Country",enableCellEdit:!1,width:"10%"},{name:"state_name",displayName:"State ",width:"10%",enableCellEdit:!1},{name:"city_name",displayName:"City ",width:"10%"},{name:"name",displayName:"Area",width:"15%"},{name:"pincode",displayName:"Pincode",type:"number",width:"15%"},{name:"lat",displayName:"Latitude",width:"15%"},{name:"lng",displayName:"Longitude",width:"15%"},{name:"Action",field:"Action",width:"10%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],e.msg={},e.gridLocation.onRegisterApi=function(t){e.gridApi=t,t.edit.on.afterCellEdit(e,function(t,i,n,a){e.msg.lastCellEdited="edited row id:"+t.id+" Column:"+i.name+" newValue:"+n+" oldValue:"+a,e.$apply()})},i.getAllAreas().then(function(t){e.gridLocation.data=t}),e.gridCountry={enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},e.gridCountry.columnDefs=[{name:"name",displayName:"Country Name",enableCellEdit:!1,width:"50%"},{name:"Action",field:"Action",width:"50%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a  style="cursor: pointer;" ng-href="" ng-click="grid.appScope.editCountry(row.entity)"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a style="cursor: pointer;" ng-href=""  ng-click="grid.appScope.deleteCountry(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],e.gridCountry.onRegisterApi=function(t){e.gridApi=t,t.edit.on.afterCellEdit(e,function(t,i,n,a){e.msg.lastCellEdited="edited row id:"+t.id+" Column:"+i.name+" newValue:"+n+" oldValue:"+a,e.$apply()})},i.getCountries().then(function(t){e.countryList=t,e.gridCountry.data=t}),e.gridState={enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},e.gridState.columnDefs=[{name:"country_name",displayName:"Country",enableCellEdit:!1,width:"33%"},{name:"name",displayName:"State ",width:"33%",enableCellEdit:!1},{name:"Action",field:"Action",width:"33%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a  style="cursor: pointer;" ng-href="" ng-click="grid.appScope.editState(row.entity)"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a style="cursor: pointer;" ng-href=""  ng-click="grid.appScope.deleteState(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],e.gridState.onRegisterApi=function(t){e.gridApi=t,t.edit.on.afterCellEdit(e,function(t,i,n,a){e.msg.lastCellEdited="edited row id:"+t.id+" Column:"+i.name+" newValue:"+n+" oldValue:"+a,e.$apply()})},i.getAllStates().then(function(t){e.gridState.data=t}),e.gridCity={enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},e.gridCity.columnDefs=[{name:"country_name",displayName:"Country",enableCellEdit:!1,width:"25%"},{name:"state_name",displayName:"State",width:"25%",enableCellEdit:!1},{name:"name",displayName:"City",width:"25%",enableCellEdit:!1},{name:"Action",field:"Action",width:"25%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a style="cursor: pointer;" ng-href="" ng-click="grid.appScope.editCity(row.entity)"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a style="cursor: pointer;" ng-href=""  ng-click="grid.appScope.deleteCity(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],e.gridCity.onRegisterApi=function(t){e.gridApi=t,t.edit.on.afterCellEdit(e,function(t,i,n,a){e.msg.lastCellEdited="edited row id:"+t.id+" Column:"+i.name+" newValue:"+n+" oldValue:"+a,e.$apply()})},i.getAllCities().then(function(t){e.gridCity.data=t}),e.gridArea={enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},e.gridArea.columnDefs=[{name:"country_name",displayName:"Country",enableCellEdit:!1,width:"15%"},{name:"state_name",displayName:"State",width:"15%",enableCellEdit:!1},{name:"city_name",displayName:"City",width:"15%",enableCellEdit:!1},{name:"name",displayName:"Area",width:"15%",enableCellEdit:!1},{name:"pincode",displayName:"Pincode",width:"10%",enableCellEdit:!1},{name:"lat",displayName:"Latitude",width:"10%",enableCellEdit:!1},{name:"lng",displayName:"Longitude",width:"10%",enableCellEdit:!1},{name:"Action",field:"Action",width:"10%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a ng-href="" ng-click="grid.appScope.editArea(row.entity)" style="cursor:pointer;"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a style="cursor: pointer;" ng-href="" ng-click="grid.appScope.deleteArea(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],e.gridArea.onRegisterApi=function(t){e.gridApi=t,t.edit.on.afterCellEdit(e,function(t,i,n,a){e.msg.lastCellEdited="edited row id:"+t.id+" Column:"+i.name+" newValue:"+n+" oldValue:"+a,e.$apply()})},i.getAllAreas().then(function(t){e.gridArea.data=t}),e.saveCountry=function(){i.saveCountry(e.country.name).then(function(t){1==t.status?(n.success("Country added to database successfully!"),i.getCountries().then(function(t){e.gridCountry.data=t})):n.error(t.message)})},e.deleteCountry=function(t){i.deleteCountry(t.id).then(function(i){if(1==i.status){var a=e.gridCountry.data.indexOf(t);e.gridCountry.data.splice(a,1),n.success(i.message)}else n.error(i.message)})},e.editCountry=function(t){e.country=t},e.getStateList=function(t){i.getStates(t).then(function(t){e.stateListForCountry=t})},e.getCityList=function(t){i.getCities(t).then(function(t){e.cityListForState=t})},e.saveState=function(){i.saveState(e.state).then(function(t){1==t.status?(n.success("State added to database successfully!"),i.getAllStates().then(function(t){e.gridState.data=t})):n.error(t.message)})},e.deleteState=function(t){i.deleteState(t.id).then(function(i){if(1==i.status){var a=e.gridState.data.indexOf(t);e.gridState.data.splice(a,1),n.success(i.message)}else n.error(i.message)})},e.editState=function(t){e.state={},e.state.country_id=t.country_id,e.state.state_name=t.name},e.saveCity=function(){i.saveCity(e.city).then(function(t){1==t.status?(n.success("City added to database successfully!"),i.getAllCities().then(function(t){e.gridCity.data=t})):n.error(t.message)})},e.deleteCity=function(t){i.deleteCity(t.id).then(function(i){if(1==i.status){var a=e.gridCity.data.indexOf(t);e.gridCity.data.splice(a,1),n.success(i.message)}else n.error(i.message)})},e.editCity=function(t){e.city={},e.city.country_id=t.country_id,e.city.state_id=t.state_id,e.city.city_name=t.name,e.city.country_id=null,e.city.state_id=null},e.saveArea=function(){i.saveArea(e.area).then(function(t){1==t.status?(n.success("Area added to database successfully!"),i.getAllAreas().then(function(t){e.gridArea.data=t})):n.error(t.message)})},e.editArea=function(t){e.area=t,e.area.state_id=null,e.area.city_id=null,e.area.area_name=t.name},e.deleteArea=function(t){i.deleteArea(t.id).then(function(i){if(1==i.status){var a=e.gridArea.data.indexOf(t);e.gridArea.data.splice(a,1),n.success(i.message)}else n.error(i.message)})},e.editArea=function(t){e.area={},e.area=t,e.area.area_name=t.name,e.area.country_id=null,e.area.state_id=null,e.area.city_id=null},e.resetAreaForm=function(){e.area={}}}]);