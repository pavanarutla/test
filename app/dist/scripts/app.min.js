"use strict";var app=angular.module("bbManager",["ngRoute","ui.router","ngMap","ngMaterial","ngMessages","slickCarousel","vsGoogleAutocomplete","ui.bootstrap","ngFileUpload","satellizer","toastr","ui.grid","ui.grid.edit","ui.grid.pagination","ngFileSaver","googlechart"]).config(["$locationProvider","$urlRouterProvider","$mdThemingProvider","$mdAriaProvider","$authProvider","$stateProvider","$httpProvider","config",function(e,t,a,r,l,n,i,o){a.theme("default").primaryPalette("red",{default:"800","hue-1":"500","hue-2":"700"}).accentPalette("orange",{default:"800","hue-1":"600","hue-2":"400"}),n.state("index",{abstract:!0,url:"/",templateUrl:"layouts/default.html",controller:"bbMngrCtrl"}).state("index.home",{url:"home",templateUrl:"views/home.html"}).state("index.formats",{url:"formats",templateUrl:"views/formats.html",controller:"FormatsCtrl"}).state("index.suggest_campaign",{url:"suggest-campaign",templateUrl:"views/suggest-a-campaign.html",controller:"CampaignCtrl"}).state("index.location",{url:"location",templateUrl:"views/map-home.html",controller:"GmapCtrl"}).state("index.campaign",{url:"campaign",templateUrl:"views/campaign.html",controller:"CampaignCtrl"}).state("index.campaigns",{url:"campaigns",templateUrl:"views/campaigns.html",controller:"CampaignCtrl"}).state("index.view_campaign",{url:"view-campaign/{campaignId}",templateUrl:"views/campaign.html",controller:"CampaignCtrl"}).state("index.profile",{url:"profile",templateUrl:"views/user-profile.html",controller:"UserProfileCtrl"}).state("index.verify_email",{url:"verify_email/{code}",templateUrl:"views/home.html",controller:function(t,e,a,r){a.isMailVerified(e.code).then(function(e){1==e.status?$mdDialog.show({templateUrl:"views/verification-success.html",fullscreen:t.customFullscreen,clickOutsideToClose:!0}):r.error(e.message)}),t.goToLogin=function(){$location.path("/"),$mdDialog.show({templateUrl:"views/sign-in.html",fullscreen:!0})}}}).state("index.reset-password",{url:"reset_password/:code",templateUrl:"views/reset-password.html",controller:"UserSettingsCtrl",params:{code:{squash:!0,value:null}}}).state("admin",{abstract:!0,url:"/admin",templateUrl:"layouts/admin.html",controller:"AdminMgrAppCtrl"}).state("admin.home",{url:"/home",templateUrl:"views/admin/home.html",controller:"AdminFeedsCtrl",title:"Feeds"}).state("admin.Feeds",{url:"/suggest-products",templateUrl:"views/admin/suggest-products.html",controller:"AdminFeedsCtrl",title:"Feeds"}).state("admin.campaign",{url:"/campaign",templateUrl:"views/admin/campaign-list.html",controller:"AdminCampaignCtrl",title:"Campaign"}).state("admin.campaign-proposal-summary",{url:"/campaign-proposal-summary/{campaignId}",templateUrl:"views/admin/campaign-proposal-summary.html",controller:"CampaignProposalCtrl"}).state("admin.registration",{url:"/registration",templateUrl:"views/admin/registration.html",controller:"AdminRegistrationCtrl",title:"User Registration"}).state("admin.companies",{url:"/companies",templateUrl:"views/admin/companies.html",controller:"CompanyCtrl"}).state("admin.hoarding-list",{url:"/hoarding-list",templateUrl:"views/admin/hoarding-list.html",controller:"ProductCtrl"}).state("admin.formats",{url:"/formats",templateUrl:"views/admin/formats.html",controller:"ProductCtrl"}).state("admin.locations",{url:"/locations",templateUrl:"views/admin/locations.html",controller:"AdminLocationCtrl"}).state("admin.locations-country",{url:"/locations-country",templateUrl:"views/admin/location-country.html",controller:"AdminLocationCtrl"}).state("admin.locations-state",{url:"/locations-state",templateUrl:"views/admin/location-state.html",controller:"AdminLocationCtrl"}).state("admin.locations-city",{url:"/locations-city",templateUrl:"views/admin/location-city.html",controller:"AdminLocationCtrl"}).state("admin.locations-area",{url:"/locations-area",templateUrl:"views/admin/location-area.html",controller:"AdminLocationCtrl"}).state("admin.subscribers",{url:"/subscribers",templateUrl:"views/admin/subscribers.html",controller:"subscribersCtrl"}).state("admin.user-queries",{url:"/queries",templateUrl:"views/admin/user-queries.html",controller:"queriesCtrl"}).state("admin.callback-requests",{url:"/callback-requests",templateUrl:"views/admin/callback-requests.html",controller:"callCenterCtrl"}).state("admin.floating-campaign",{url:"/floating-campaign",templateUrl:"views/admin/floating-campaign.html",controller:"AdminCampaignCtrl"}).state("owner",{abstract:!0,url:"/owner",templateUrl:"layouts/owner.html",controller:"OwnerMngrCtrl"}).state("owner.dashboard",{url:"/dashboard",templateUrl:"views/owner/dashboard.html",controller:"OwnerFeedsCtrl"}).state("owner.ownerCampaign",{url:"/ownerCampaign",templateUrl:"views/owner/campaign.html",controller:"OwnerCampaignCtrl"}).state("owner.editCampaign",{url:"/editCampaign",templateUrl:"views/owner/editcampaign.html",controller:"OwnerCampaignCtrl"}).state("owner.requestHoarding",{url:"/requestHoarding",templateUrl:"views/owner/requesthoarding.html",controller:"requestHoarding"}).state("owner.suggestproducts",{url:"/suggestproducts",templateUrl:"views/owner/suggest-products.html",controller:"OwnerFeedsCtrl"}).state("owner.hoarding-list",{url:"/hoarding-list",templateUrl:"views/owner/hoarding-list.html",controller:"OwnerFeedsCtrl"}).state("owner.settings",{url:"/settings",templateUrl:"views/owner/accountsetting.html",controller:""}).state("owner.profile",{url:"/profile",templateUrl:"views/owner/user-profile.html"}).state("owner.home",{url:"/home",templateUrl:"views/owner/home.html",controller:"OwnerHomeController"}).state("owner.outsourcingagent",{url:"/outsourcingagent",templateUrl:"views/owner/outsourcingagent.html",controller:"outSourcing"}).state("owner.teamPage",{url:"/teamPage",templateUrl:"views/owner/team.html",controller:"teamPage"}).state("owner.feedBack",{url:"/feedBack",templateUrl:"views/owner/feedback.html",controller:"feedback"}).state("owner.signIn",{url:"/signIn",templateUrl:"views/owner/signin.html",controller:"ownerSigninCtrl"}),t.when("/","/home"),t.when("/admin","/admin/home"),t.when("/owner","/owner/dashboard"),t.otherwise("/"),l.baseUrl=o.apiPath,l.loginUrl="/login",l.logoutUrl="/logout",l.signupUrl="/signup",r.disableWarnings(),i.interceptors.push("LoadingInterceptor")}]);app.config(["slickCarouselConfig",function(e){e.dots=!0,e.autoplay=!1}]),app.config(["datepickerConfig","datepickerPopupConfig",function(e,t){e.startingDay="Today",e.showWeeks=!1,t.datepickerPopup="MM/dd/yyyy"}]),app.config(["toastrConfig",function(e){angular.extend(e,{autoDismiss:!1,containerId:"toast-container",maxOpened:0,newestOnTop:!0,positionClass:"toast-bottom-right",preventDuplicates:!1,preventOpenDuplicates:!1,target:"body"})}]),app.run(["$rootScope","$location","$http","$auth","$mdDialog","$transitions","toastr",function(t,a,e,r,l,n,i){n.onStart({},function(e){t.currentTitle=e.to().title,t.currStateName=e.to().name,"index.location"==e.to().name&&r.isAuthenticated()?t.footerhide=!0:t.footerhide=!1;if(-1!=_.indexOf(["index.location"],e.to().name)){if(!r.isAuthenticated())return t.postLoginState=e.to().name,a.path("/"),l.show({templateUrl:"views/sign-in.html",fullscreen:!0}),!1}else if(-1!=_.indexOf(["admin.html","admin.products","admin.add-products","admin.home","admin.Feeds","admin.campaign-suggestion","admin.campaign","admin.campaign-proposal-summary","admin.campaign-running-summary","admin.campaign-closed-summary","admin.registration","admin.companies","admin.hoarding-list","admin.formats","admin.locations","admin.locations-country","admin.locations-state","admin.locations-city","admin.locations-area","admin.subscribers","admin.queries","admin.callcenterinfo"],e.to().name)){if(!r.isAuthenticated())return t.postLoginState=e.to().name,a.path("/"),l.show({templateUrl:"views/sign-in.html",fullscreen:!0}),!1;if(-1==_.indexOf(_.pluck(r.getPayload().user.roles,"name"),"admin")&&-1==_.indexOf(_.pluck(r.getPayload().user.roles,"name"),"owner"))return i.error("You don't have the rights to access this page. Please contact the owner.","Error"),!1}else if(-1!=_.indexOf([],e.to().name))if(r.isAuthenticated()){if(-1==_.indexOf(_.pluck(r.getPayload().user.roles,"name"),"owner"))return i.error("You don't have the rights to access this page. Please contact the admin.","Error"),!1}else t.postLoginState=e.to().name,a.path("/"),l.show({templateUrl:"views/sign-in.html",fullscreen:!0})})}]);
app.constant("config",{serverUrl:"http://104.236.11.252",apiPath:"http://104.236.11.252/api"});
"user strict";app.controller("AuthCtrl",["$scope","$mdDialog","$location","$rootScope","$auth","$state","toastr","UserService",function(s,t,e,r,a,n,i,o){s.showSignin=!0,s.forgotPasswordpage=!1,s.user={},s.signInUser=function(){a.login(s.user).then(function(e){if(a.isAuthenticated()){var o=a.getPayload().user;_.each(a.getPayload().userMongo,function(e,s){o[s]=e}),r.isAuthenticated=!0,r.loggedInUser=o,localStorage.isAuthenticated=!0,localStorage.loggedInUser=JSON.stringify(o),i.success("You have successfully signed in!"),t.hide(),r.postLoginState?n.go(r.postLoginState,null):n.go("index.location",null)}else 0==e.data.status&&i.error(e.data.message)}).catch(function(e){i.error(e.data.message,e.status),t.hide()})},s.close=function(){t.hide()},s.userAgencyHeader=!0,s.showRegisterDialog=function(e){t.show({templateUrl:"views/register.html",fullscreen:s.customFullscreen,clickOutsideToClose:!0})},s.showForgotPasswordDialog=function(){s.forgotPasswordpage=!0},s.currentNavItem="users",s.userForm=!0,s.agencyForm=!1,s.users=function(){s.userForm=!0,s.agencyForm=!1,s.forgotPasswordpage=!1},s.agency=function(){s.agencyForm=!0,s.userForm=!1,s.forgotPasswordpage=!1},s.requestResetPassword=function(e){var s={email:e.email};o.requestResetPassword(s).then(function(e){1==e.status?i.success(e.message):i.error(e.error)})},s.close=function(){t.hide(),n.reload()}}]);
app.controller("bbMngrCtrl",["$scope","$mdDialog","$mdSidenav","$timeout","$location","$rootScope","MapService","$auth","toastr","ContactService","CampaignService","UserService","LocationService","NotificationService","config","$window","$interval",function(s,t,a,i,n,o,e,l,c,r,g,u,d,f,m,h,p){s.forms={},localStorage.isAuthenticated&&localStorage.loggedInUser&&(o.isAuthenticated=localStorage.isAuthenticated||!1,o.loggedInUser=JSON.parse(localStorage.loggedInUser)),s.trafficOn=!1,s.filter=!1,s.format=!1,s.shortlist=!1,s.savedcampaign=!1,s.showfooter=!0,s.browabillboard=!1,s.dashboardData=!0,s.locationpageonly=!1,o.isAuthenticated=l.isAuthenticated(),s.filters=function(){s.filter=!s.filter,s.format=!1,s.shortlist=!1,s.savedcampaign=!1},s.formats=function(){s.filter=!1,s.format=!s.format,s.shortlist=!1,s.savedcampaign=!1},s.shortlistDiv=function(){s.filter=!1,s.format=!1,s.shortlist=!s.shortlist,s.savedcampaign=!1},s.savedcampaignDiv=function(){s.filter=!1,s.format=!1,s.shortlist=!1,s.savedcampaign=!s.savedcampaign},s.isactive=!1,s.isshortlisted=!1,s.iscampaigns=!1,s.isformats=!1,s.issuggestme=!1,s.Home=function(){s.isactive=!s.isactive,s.isshortlisted=!1,s.iscampaigns=!1,s.isformats=!1,s.issuggestme=!1},s.shortlisted=function(){s.isshortlisted=!s.isshortlisted,s.isactive=!1,s.iscampaigns=!1,s.isformats=!1,s.issuggestme=!1},s.campaigns=function(){s.iscampaigns=!s.iscampaigns,s.isactive=!1,s.isshortlisted=!1,s.isformats=!1,s.issuggestme=!1},s.formatmobile=function(){s.isformats=!s.isformats,s.isactive=!1,s.isshortlisted=!1,s.iscampaigns=!1,s.issuggestme=!1},s.suggestme=function(){s.issuggestme=!s.issuggestme,s.isactive=!1,s.isshortlisted=!1,s.iscampaigns=!1,s.isformats=!1},this.isOpen=!1,this.availableModes=["md-fling","md-scale"],this.selectedMode="md-fling",this.selectedDirection="up",s.toggleTraffic=function(){s.trafficOn=!s.trafficOn},s.closeSidenav=function(){a("left").toggle()},s.closeSideNavPanel=function(){a("right").toggle()},s.showSignInDialog=function(e){t.show({templateUrl:"views/sign-in.html",fullscreen:s.customFullscreen,clickOutsideToClose:!0,controller:"AuthCtrl"})},s.emailSucess=function(e){t.show({templateUrl:"views/email-verification-sucess.html",fullscreen:s.customFullscreen,clickOutsideToClose:!0})},s.whatwedo=function(){n.path("/"),window.scroll(0,580)},s.formate=function(){n.path("/"),window.scroll(0,1550)},s.whyOutdoor=function(){n.path("/"),window.scroll(0,2430)},s.contactus=function(){n.path("/"),window.scroll(0,3270)},$(window).scroll(function(){300<$(this).scrollTop()?$(".goToTop").fadeIn():$(".goToTop").fadeOut()}),$(".goToTop").click(function(){return $("html, body").animate({scrollTop:0},1e3),!1}),$(window).on("scroll",function(){200<$(window).scrollTop()?($(".header").addClass("active"),$(".toolbar-btn").addClass("active-one"),$(".browse-btn").addClass("active-one")):($(".header").removeClass("active"),$(".toolbar-btn").removeClass("active-one"),$(".browse-btn").removeClass("active-one"))}),s.slickConfig2Loaded=!0,s.slickConfig2={autoplay:!1,infinite:!0,autoplaySpeed:5e3,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{slidesToShow:3,infinite:!0}},{breakpoint:959,settings:{slidesToShow:2,infinite:!0}},{breakpoint:600,settings:{slidesToShow:2,infinite:!0}},{breakpoint:320,settings:{slidesToShow:1,infinite:!0}}],method:{}},s.query={},s.sendQuery=function(){r.sendQuery(s.query).then(function(e){1==e.status?(c.success(e.message),s.sendQueryErrors=null):0==e.status&&(s.sendQueryErrors=e.message),s.query={},s.forms.sendQueryForm.$setPristine(),s.forms.sendQueryForm.$setUntouched()},function(e){c.error("somthing went wrong please try agin later")})},s.subscriberData={},s.subscribe=function(){r.subscribe(s.subscriberData).then(function(e){1==e.status?c.success(e.message):c.error(e.message)}),angular.element($("#subscriber-email")).val("")},s.showContact=function(){t.show({templateUrl:"views/show-contact.html",fullscreen:s.customFullscreen,clickOutsideToClose:!0,preserveScope:!0,scope:s})},s.callbackRequest={},s.requestCallBack=function(){r.requestCallBack(s.callbackRequest).then(function(e){1==e.status?(c.success(e.message),t.hide()):c.error(e.message)})},s.logout=function(){l.logout().then(function(e){o.isAuthenticated=!1,n.path("/"),localStorage.clear(),c.warning("You have successfully signed out!")})},s.closeSideViewAll=function(){a("viewAll").toggle()},s.existingCampaignSidenavVisible=!1,s.toggleExistingCampaignSidenav=function(){s.existingCampaignSidenavVisible=!s.existingCampaignSidenavVisible},s.toggleViewAllShortlisted=function(){a("shortlistAndSaveSidenav").toggle()},s.toggleShareShortlistedSidenav=function(){a("shortlistSharingSidenav").toggle()},s.closeSideEditList=function(){a("savedEdit").toggle()},s.closeSideSavedCampaign=function(){a("savedSavedCampaign").toggle()},s.campaignSavedSuccessfully=!1,s.toggleSaveCampaignSidenav=function(){a("saveCampaignSidenav").toggle(),s.campaignSavedSuccessfully=!1},s.closeSideThanksSidenav=function(){a("thanksCampaign").toggle()},s.toggleProductDetailSidenav=function(){a("productDetails").toggle()},s.toggleShareCampaignSidenav=function(e){s.campaignToShare=e,a("shareCampaign").toggle()},s.toggleSuggestMeSidenav=function(){a("suggestMe").toggle()},s.toggleEmptyCampaignSidenav=function(){a("emptyCampaignSidenav").toggle()},s.toggleCampaignDetailSidenav=function(){a("campaignDetailSidenav").toggle()},s.toggleCreateEmptyCampaignSidenav=function(){s.campaignSaved=!1,a("createEmptyCampaignSidenav").toggle()},s.campaignSaved=!1,s.createNewCampaign=function(){s.campaignSaved=!0},s.autoCompleteArea=function(e){return d.getAreasWithAutocomplete(e)},s.selectedAreaChanged=function(e){localStorage.areaFromHome=JSON.stringify(e)},o.serverUrl=m.serverUrl,s.close=function(){t.hide()},s.notifs=[];var v=function(){var e=0;s.notifs&&0<s.notifs.length&&(e=moment.utc(s.notifs[0].updated_at).valueOf()),f.getAllNotifications(e).then(function(e){s.readNotifCount=_.chain(e).filter(function(e){return 1==e.status}).value().length,s.unreadNotifCount=_.chain(e).filter(function(e){return 0==e.status}).value().length,s.notifs=_.union(s.notifs,e),i(v,1e3)})};o.isAuthenticated&&v(),s.showCampaignDetails=function(i){f.updateNotifRead(i).then(function(e){if(1==e.status){v();var t=_.find(s.notifs,function(e){e.id=i});t&&(t.status=1)}else c.error(e.message)}),a("right").toggle(),n.path("/campaigns")},s.setSelectedFormat=function(e){o.formatSelected=e}}]);
app.controller("CampaignCtrl",["$scope","$mdDialog","$mdSidenav","$interval","$stateParams","$window","$location","CampaignService","config",function(n,s,e,t,a,i,o,l,u){n.CAMPAIGN_STATUS=["suggestion-requested","campaign-preparing","campaign-created","quote-requested","quote-given","change-requested","launch-requested","running","suspended","stopped"],n.showPaymentdailog=function(){s.show({templateUrl:"views/updatepaymentDailog.html",fullscreen:n.customFullscreen,clickOutsideToClose:!0})},n.cancel=function(){s.cancel()},n.data={},n.uploadFile=function(e){if(n.data.fileName=e.files[0].name,e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("#photo-id").attr("src",e.target.result);var t=document.createElement("canvas"),a=document.createElement("img");a.setAttribute("src",e.target.result),t.width=a.width,t.height=a.height,t.getContext("2d").drawImage(a,0,0);t.toDataURL("image/jpeg");n.data.uploadedPhoto=e.target.result.replace(/data:image\/jpeg;base64,/g,"")},t.readAsDataURL(e.files[0])}},n.ProductImageView=function(e,t){s.show({locals:{src:t},templateUrl:"views/image-popup-large.html",fullscreen:n.customFullscreen,clickOutsideToClose:!0,controller:function(e,t){e.img_src=t}})},n.campaignDetails={},n.limit=3,n.loadMore=function(){n.limit=n.items.length},n.getUserCampaigns=function(){l.getCampaigns().then(function(e){n.plannedCampaigns=_.filter(e,function(e){return e.status<6}),n.runningCampaigns=_.where(e,{status:_.indexOf(n.CAMPAIGN_STATUS,"running")}),n.closedCampaigns=_.where(e,{status:_.indexOf(n.CAMPAIGN_STATUS,"stopped")})})},n.getUserCampaigns(),n.getCampaignDetails=function(e){l.getCampaignWithProducts(e).then(function(e){n.campaignDetails=e})},a.campaignId&&n.getCampaignDetails(a.campaignId),n.viewProductImage=function(e){var t=u.serverUrl+e;s.show({locals:{src:t},templateUrl:"views/image-popup-large.html",fullscreen:n.customFullscreen,clickOutsideToClose:!0,controller:function(e,t){e.img_src=t}})},n.requestLaunchCampaign=function(t,a){l.requestLaunch(a).then(function(e){1==e.status?(s.show(s.alert().parent(angular.element(document.querySelector("body"))).clickOutsideToClose(!0).title(e.message).textContent("The Admin will soon launch your campaign and intimate you about it.").ariaLabel("Alert Dialog Demo").ok("Got it!").targetEvent(t)),n.getCampaignDetails(a)):toastr.error(e.message)})},n.deleteProductFromCampaign=function(e,t){l.deleteProductFromCampaign(t,e).then(function(e){1==e.status?(l.getCampaignWithProducts(t).then(function(e){n.campaignDetails=e}),toastr.success(e.message)):toastr.error(e.message)})},n.openRequestChangeQuoteForm=function(e){s.show({locals:{ctrlScope:n},templateUrl:"views/request-quote-change.html",fullscreen:n.customFullscreen,clickOutsideToClose:!0,controller:function(e,t,a,n,s){e.changeRequest={},e.changeRequest.for_campaign_id=a.campaignDetails.id,e.requestChangeInQuote=function(){n.requestChangeInQuote(e.changeRequest).then(function(e){1==e.status?(t.hide(),s.success(e.message)):s.error(e.message)})},e.close=function(){t.hide()}}})},n.sendSuggestionRequest=function(t){l.sendSuggestionRequest(n.suggestionRequest).then(function(e){1==e.status&&(n.suggestMeRequestSent=!0),s.show(s.alert().parent(angular.element(document.querySelector("body"))).clickOutsideToClose(!0).title("We will get back to you!!!!").textContent(e.message).ariaLabel("Alert Dialog Demo").ok("Got it!").targetEvent(t)).finally(function(){o.path("#/home")})})},n.resetSuggestionForm=function(){n.suggestionRequest={}},n.deleteCampaign=function(e){l.deleteCampaign(e).then(function(e){1==e.status?(n.getUserCampaigns(),toastr.success(e.message)):toastr.error(e.message)})},n.ShareShortlistedSidenav=function(){e("shortlistSharingSidenav").toggle()}}]);
app.controller("campaiginEditController",["$scope","$interval","$mdDialog",function(e,i,t){e.hoardingitems=[{id:"AD-001",type:"Billboard",area:"Amreepet",size:"20*30",light:"Yes",sdate:"20-Fed-2017",edate:"20-April-2017",price:"25,000"},{id:"AD-002",type:"Unipole",area:"Amreepet",size:"20*30",light:"Yes",sdate:"20-Fed-2017",edate:"20-April-2017",price:"25,000"},{id:"AD-003",type:"Digital",area:"Amreepet",size:"20*30",light:"Yes",sdate:"20-Fed-2017",edate:"20-April-2017",price:"25,000"}],e.limit=5,e.loadMore=function(){e.limit=e.items.length},e.showPaymentdailog=function(){t.show({templateUrl:"views/updatepaymentDailog.html",fullscreen:e.customFullscreen,clickOutsideToClose:!0})},e.cancel=function(){t.cancel()}}]);
"user strict";app.controller("ContactCtrl",["$scope","$http",function(l,e){l.gridQueries={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},l.gridQueries.columnDefs=[{name:"id",displayName:"Sr.no",enableCellEdit:!1,width:"10%",enableFiltering:!1},{name:"name",displayName:"Name",width:"20%",enableCellEdit:!1},{name:"email",displayName:"Email Id",width:"20%",enableCellEdit:!1},{name:"Company",displayName:"Company Name",width:"20%"},{name:"message",displayName:"Message",width:"20%",enableFiltering:!1},{name:"Action",field:"Action",width:"10%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">remove_red_eye</i></md-icon></a></span></div>',enableFiltering:!1}],l.msg={},l.gridQueries.onRegisterApi=function(e){(l.gridApi=e).edit.on.afterCellEdit(l,function(e,i,n,a){l.msg.lastCellEdited="edited row id:"+e.id+" Column:"+i.name+" newValue:"+n+" oldValue:"+a,l.$apply()})},e.get("fakedb/company.json").success(function(e){for(i=0;i<e.length;i++)e[i].registered=new Date(e[i].registered);l.gridQueries.data=e}),l.gridSubscribers={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},l.gridSubscribers.columnDefs=[{name:"id",displayName:"Sr.no",enableCellEdit:!1,width:"20%",enableFiltering:!1},{name:"email",displayName:"Email Id",width:"40%",enableCellEdit:!1},{name:"Action",field:"Action",width:"40%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">remove_red_eye</i></md-icon></a></span></div>',enableFiltering:!1}],l.msg={},l.gridSubscribers.onRegisterApi=function(e){(l.gridApi=e).edit.on.afterCellEdit(l,function(e,i,n,a){l.msg.lastCellEdited="edited row id:"+e.id+" Column:"+i.name+" newValue:"+n+" oldValue:"+a,l.$apply()})},e.get("fakedb/company.json").success(function(e){for(i=0;i<e.length;i++)e[i].registered=new Date(e[i].registered);l.gridSubscribers.data=e})}]);
app.controller("FormatsCtrl",["$scope","$rootScope",function(e,t){t.formatSelected?e.selectedFormatIndex=t.formatSelected:e.selectedFormatIndex=0}]);
app.controller("GmapCtrl",["$scope","NgMap","$mdSidenav","$mdDialog","$timeout","$rootScope","MapService","LocationService","ProductService","CampaignService","FileSaver","Blob","config","toastr",function(s,t,l,n,a,e,o,r,i,c,p,d,u,g){s.address={name:"People tech group hyderabad",place:"",components:{placeId:"",streetNumber:"",street:"",city:"",state:"",countryCode:"",country:"",postCode:"",district:"",location:{lat:17.385,lng:78.4867}}},s.hidelocations=!1;s.today=new Date,s.mapObj;var m=[];s.selectedProduct=null,s.selectedForNewCampaign=[],s.newCampaign={},s.serverUrl=u.serverUrl;s.siteNoSearch="",s.showTrafficLegend=!1,s.isMapInitialized=!1,s.$watch(function(){return l("productDetails").isOpen()},function(e,t){0==e&&(s.selectedProduct=null,h.setMap(null),s.$parent.existingCampaignSidenavVisible=!1)}),s.$watch(function(){return l("suggestMe").isOpen()},function(e,t){0==e&&(s.suggestMeRequestSent=!1)});var f=new google.maps.TrafficLayer,h=new google.maps.Marker({icon:{url:"assets/images/maps/Ellipse 75.png",scaledSize:new google.maps.Size(30,30)}});function v(e){s.mapObj.setCenter(e.position),h.setPosition(e.position),h.setMap(s.mapObj),s.product.image=u.serverUrl+e.properties.image,s.product.siteNo=e.properties.siteNo,s.product.panelSize=e.properties.panelSize,s.product.address=e.properties.address,s.product.impressions=e.properties.impressions,s.product.lighting=e.properties.lighting,s.product.direction=e.properties.direction,s.product.availableDates=e.properties.availableDates,s.hideSelectedMarkerDetail=!1,l("productDetails").toggle(),s.selectedProduct=e}s.product={},o.getMarkers().then(function(e){s.filteredMarkers=e,t.getMap().then(function(e){s.mapObj=e,s.processMarkers(),localStorage.areaFromHome&&function(){s.selectedArea=JSON.parse(localStorage.areaFromHome);var e=s.selectedArea;s.mapObj.setCenter({lat:Number(e.lat),lng:Number(e.lng)});var t=new google.maps.LatLngBounds;t.extend({lat:Number(e.lat),lng:Number(e.lng)}),s.mapObj.fitBounds(t),localStorage.removeItem("areaFromHome")}(),s.mapObj.addListener("zoom_changed",function(){s.selectedProduct=null,h.setMap(null)})})}),i.getFormatList().then(function(e){s.formatGrid=[],s.selectedFormats=[];for(var t=e.length/3,a=0,n=0;n<t;n++){for(var o=[],r=0;r<3;r++)o.push(e[a]),e[a]&&(s.selectedFormats.push(e[a].id),a++);s.formatGrid.push(o)}}),s.countries=[],s.states=[],s.cities=[],s.areas=[],r.getCountries().then(function(e){s.countries=e}),s.Sectors=[],s.DurationSectors=[],s.opened={start:!1,end:!1},s.today=new Date,s.filter=!1,s.format=!1,s.shortlist=!1,s.savedcampaign=!1,s.Recommended=!1,s.Popular=!1,s.footerhide=!0,s.locationpageonly=!0,s.dashboardData=!1,s.filters=function(){s.filter=!s.filter,s.format=!1,s.shortlist=!1,s.savedcampaign=!1},s.formats=function(){s.filter=!1,s.format=!s.format,s.shortlist=!1,s.savedcampaign=!1},s.shortlistDiv=function(){s.filter=!1,s.format=!1,s.shortlist=!s.shortlist,s.savedcampaign=!1},s.savedcampaignDiv=function(){s.filter=!1,s.format=!1,s.shortlist=!1,s.savedcampaign=!s.savedcampaign},s.RecommendedDiv=function(){s.Recommended=!s.Recommended,s.Popular=!1},s.PopularDiv=function(){s.Recommended=!1,s.Popular=!s.Popular},s.pointermap=function(){s.ispointer=!s.ispointer},s.showProductImagePopup=function(e,t){n.show({locals:{src:t},templateUrl:"views/image-popup-large.html",fullscreen:s.customFullscreen,clickOutsideToClose:!0,controller:function(e,t){e.img_src=t}})},s.selectedCountry={},s.selectedStates={},s.selectedcitys={},s.selectedareas={},s.searchTerm,s.clearSearchTerm=function(){s.searchTerm=""},s.setCountry=function(){r.getStates(s.selectedCountry).then(function(e){s.states=e})},s.setStates=function(){r.getCities(s.selectedStates).then(function(e){s.cities=e})},s.setCities=function(){r.getAreas(s.selectedcitys).then(function(e){s.areas=e})},s.showConfirmation=function(e){n.show(n.alert().parent(angular.element(document.querySelector("body"))).clickOutsideToClose(!0).title("Your Campaign is successfully Saved!!!!").textContent("You can specify some description text in here.").ariaLabel("Alert Dialog Demo").ok("Got it!").targetEvent(e))},s.industrySectorList=[{name:"Aerospace"},{name:"Agriculture"},{name:"Automotive"},{name:"Banking, Financial services and Insurance"},{name:"Construction, Engineering, Architectural"},{name:"Classifieds"},{name:"Consumer Durables"},{name:"Energy - Oil & Gas"},{name:"Energy - Other"},{name:"Energy – Utilities"},{name:"Entertainment"},{name:"Ecommerce"},{name:"Environment"},{name:"Education"},{name:"Forestry"},{name:"Fast-moving consumer goods"},{name:"Fashion & lifestyle"},{name:"GIS/Mapping/Cadastral"},{name:"Global Development"},{name:"Government – Civil"},{name:"Government - Defense &Intelligence"},{name:"Healthcare"},{name:"Hotels & Restaurant"},{name:"Insurance"},{name:"Logistics"},{name:"Marine / Fishing"},{name:"Media / Communications"},{name:"Office Supplies"},{name:"Public Services"},{name:"Retail"},{name:"Real Estate & Infrastructure"},{name:"Telecom"},{name:"Travel & Transport"},{name:"Others"}],s.CampaignDuration=[{model:"10 Days"},{model:"15 Days"},{model:"20 Days"},{model:"25 Days"},{model:"30 Days"},{model:"2 Months"},{model:"3 Months"},{model:"6 Months"},{model:"1 year"}],s.exportAllCampaigns=function(){c.exportCampaignsPdf().then(function(e){var t=new d([e],{type:"application/pdf;charset=utf-8"});p.saveAs(t,"campaigns.pdf"),e.status&&g.error(e.meesage)})},s.toggleViewAllFilter=function(){l("filtersMobile").toggle()},s.mapFilter=function(){l("filtersMap").toggle()},s.shortListed=function(){l("shortlistedList").toggle()},s.savedCampagin=function(){l("savedCamapgin").toggle()},s.suggestionRequest={},s.suggestMeRequestSent=!1,s.newDate=new Date,s.endDate=s.start_date+1,google.maps.event.addListener(h,"click",function(e){s.selectedProduct=null,h.setMap(null)});var S=[],C=[],y=[],b={};function P(){o.getshortListProduct(JSON.parse(localStorage.loggedInUser).id).then(function(e){s.shortListedProducts=e})}s.processMarkers=function(){_.each(s.filteredMarkers,function(e,t){var a={position:{lat:e.lat,lng:e.lng},data:e};S.push(a),C[JSON.stringify(a.position)]?C[JSON.stringify(a.position)]++:C[JSON.stringify(a.position)]=1}),_.each(S,function(e,t){1<C[JSON.stringify(e.position)]?(b[JSON.stringify(e.position)]?b[JSON.stringify(e.position)].count++:(b[JSON.stringify(e.position)]={},b[JSON.stringify(e.position)].markers=[],b[JSON.stringify(e.position)].count=1),b[JSON.stringify(e.position)].markers.push(e.data)):y.push(e.data)});var o=[];_.each(y,function(e,t){var a=new google.maps.LatLng(e.lat,e.lng),n=new google.maps.Marker({position:a,icon:{url:u.serverUrl+e.symbol,scaledSize:new google.maps.Size(30,30)},title:"Location:"+e.address+"\nNo. of views: "+e.impressions});n.properties=e,o.push(n),m.push(n),google.maps.event.addListener(n,"click",function(e){v(n)})});s.Clusterer=new MarkerClusterer(s.mapObj,o,{gridSize:50,maxZoom:13,imagePath:"assets/images/maps/m"});var i=new google.maps.Marker({icon:{url:"assets/images/maps/Ellipse 55.png",scaledSize:new google.maps.Size(55,55),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(27.8,29.5)}}),r=new OverlappingMarkerSpiderfier(s.mapObj,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0,circleSpiralSwitchover:1/0,legWeight:0,circleFootSeparation:32,nearbyDistance:1,keepSpiderfied:!0});_.each(b,function(n,e){for(var o=0;o<n.count;o++)!function(){var e={text:" ",color:"rgba(255, 255, 255, 1)"};0==o&&(e.text=n.count.toString());var t={url:"assets/images/maps/unspidered-cluster.png",scaledSize:new google.maps.Size(20,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,10)},a=new google.maps.Marker({position:{lat:parseFloat(n.markers[o].lat),lng:parseFloat(n.markers[o].lng)},icon:t,label:e,title:"Location:"+n.markers[o].address+"\nNo. of views: "+n.markers[o].impressions});a.properties=n.markers[o],a.groupSize=n.count,google.maps.event.addListener(a,"spider_click",function(e){var t;t=a,s.mapObj.setCenter(t.position),h.setMap(null),s.product.image=u.serverUrl+t.properties.image,s.product.siteNo=t.properties.siteNo,s.product.panelSize=t.properties.panelSize,s.product.address=t.properties.address,s.product.impressions=t.properties.impressions,s.product.direction=t.properties.direction,s.product.lighting=t.properties.lighting,s.product.availableDates=t.properties.availableDates,s.hideSelectedMarkerDetail=!1,l("productDetails").toggle(),s.selectedProduct=t}),m.push(a),r.addMarker(a),s.Clusterer.addMarker(a)}()}),r.addListener("format",function(e,t){var a,n=e.getLabel(),o=32+10*(e.groupSize-1),r={url:"assets/images/maps/Ellipse 55.png",scaledSize:new google.maps.Size(o,o),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(o/2,o/2)};t==OverlappingMarkerSpiderfier.markerStatus.SPIDERFIED?(n.color="rgba(255, 255, 255, 0)",e.setLabel(n),i.setPosition(e.getPosition()),i.setIcon(r),i.setMap(s.mapObj),a={url:u.serverUrl+e.properties.symbol,scaledSize:new google.maps.Size(30,30),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(15,15)}):(a={url:"assets/images/maps/unspidered-cluster.png",scaledSize:new google.maps.Size(20,20),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,10)},n.color="rgba(255, 255, 255, 1)",e.setLabel(n),i.setMap(null)),e.setIcon(a)})},s.$parent.$watch("trafficOn",function(e,t){var a=null;t||(a=s.mapObj),f.setMap(a)}),s.applyFilter=function(){S=[],C=[],y=[],b={};var e={area:s.selectedAreas,product_type:s.selectedFormats};o.filterProducts(e).then(function(e){if(_.each(m,function(e,t){e.setMap(null),s.Clusterer.removeMarker(e)}),m=[],s.filteredMarkers=e,s.processMarkers(),0<e.length){var a=new google.maps.LatLngBounds;_.each(m,function(e,t){a.extend(e.getPosition())}),s.mapObj.fitBounds(a)}else g.error("no marker found for the criteria you selected")})},s.shortlistSelected=function(t){o.shortListProduct(s.selectedProduct.properties.id,JSON.parse(localStorage.loggedInUser).id).then(function(e){n.show(n.alert().parent(angular.element(document.querySelector("body"))).clickOutsideToClose(!0).title("Shortlist Product").textContent(e.message).ariaLabel("shortlist-success").ok("Got it!").targetEvent(t),l("productDetails").close()),P(),l("productDetails").close()})},P(),s.deleteShortlisted=function(t,e){o.deleteShortlistedProduct(JSON.parse(localStorage.loggedInUser).id,e).then(function(e){n.show(n.alert().parent(angular.element(document.querySelector("body"))).clickOutsideToClose(!0).title("ShortList Product").textContent(e.message).ariaLabel("delete-shortlisted").ok("Got it!").targetEvent(t)),P()})},s.resetFilters=function(){S=[],C=[],y=[],b={},s.selectedAreas=null,s.selectedcitys=null,s.selectedStates=null,s.selectedArea=null,s.circleRadius=null,_.each(m,function(e,t){e.setMap(null),s.Clusterer.removeMarker(e),delete e}),m=[],o.markers().then(function(e){s.filteredMarkers=e,s.processMarkers();var a=new google.maps.LatLngBounds;_.each(m,function(e,t){a.extend(e.getPosition())}),s.mapObj.fitBounds(a)})},s.campaign={},s.saveCampaign=function(){0<s.shortListedProducts.length?(s.campaign.products=[],_.each(s.shortListedProducts,function(e,t){s.campaign.products.push(e.id)}),c.saveCampaign(s.campaign).then(function(e){s.campaignSavedSuccessfully=!0,s.campaign={},a(function(){l("saveCampaignSidenav").close(),l("shortlistAndSaveSidenav").close(),s.campaignSavedSuccessfully=!1},3e3),s.loadPlannedUserCampaigns(),P()})):g.error("Please shortlist some products first.")},s.emptyCampaign={},s.createEmptyCampaign=function(){s.campaign.products=[],c.saveCampaign(s.emptyCampaign).then(function(e){s.emptyCampaignSaved=!0,s.emptyCampaign={},a(function(){l("createEmptyCampaignSidenav").close(),s.emptyCampaignSaved=!1},3e3),s.loadPlannedUserCampaigns(),P()})},s.searchBySiteNo=function(){o.searchBySiteNo(s.siteNoSearch).then(function(e){if(e.id){var t={};t.properties=e;var a=new google.maps.LatLngBounds;a.extend({lat:parseFloat(e.lat),lng:parseFloat(e.lng)}),s.mapObj.fitBounds(a),v(t)}else g.error("No product found with that tab id","error")})},s.plannedUserCampaigns=[],s.loadPlannedUserCampaigns=function(){c.getPlannedCampaigns().then(function(e){s.plannedUserCampaigns=e})},s.loadPlannedUserCampaigns(),s.deletePlannedCampaign=function(e){c.deleteCampaign(e).then(function(e){1==e.status?(s.loadPlannedUserCampaigns(),g.success(e.message)):g.error(e.message)})},s.toggleFormatSelection=function(t){_.contains(s.selectedFormats,t)?s.selectedFormats=_.reject(s.selectedFormats,function(e){return e==t}):s.selectedFormats.push(t),s.applyFilter()},s.isFormatSelected=function(e){return _.contains(s.selectedFormats,e)},s.toggleTrafficLegends=function(){s.showTrafficLegend=!s.showTrafficLegend},rangeCircle=new google.maps.Circle({strokeColor:"#ea3b37",strokeOpacity:1,strokeWeight:1.5,fillOpacity:0}),s.range={},s.range.circleRadius=0,s.updateCircle=function(){rangeCircle.setMap(null),rangeCircle.setRadius(Math.sqrt(1e3*s.circleRadius/Math.PI)),rangeCircle.setCenter({lat:Number(s.selectedArea.lat),lng:Number(s.selectedArea.lng)}),rangeCircle.setMap(s.mapObj),s.mapObj.fitBounds(rangeCircle.getBounds())},s.viewCampaignDetails=function(e){c.getCampaignWithProducts(e).then(function(e){s.campaignDetails=e,s.toggleCampaignDetailSidenav()})};var w;s.addProductToExistingCampaign=function(e){var t={product_id:s.selectedProduct.properties.id,campaign_id:e.id};c.addProductToExistingCampaign(t).then(function(e){1==e.status?(g.success(e.message),l("productDetails").close()):g.error(e.message)})},s.shareShortlistedProducts=function(e){var t={email:e.email,receiver_name:e.name};c.shareShortListedProducts(t).then(function(e){1==e.status?(g.success(e.message),l("shortlistSharingSidenav").close()):g.error(e.message)})},s.shareCampaign=function(t,e){var a={campaign_id:s.campaignToShare.id,email:e.email,receiver_name:e.receiver_name};c.shareCampaignToEmail(a).then(function(e){1==e.status?(l("shareCampaign").close(),n.show(n.alert().parent(angular.element(document.querySelector("body"))).clickOutsideToClose(!0).title(e.message).ariaLabel("Alert Dialog Demo").ok("Got it!").targetEvent(t))):g.error(e.message)})},s.viewProduct=function(e){s.product.image=u.serverUrl+e.image,s.product.siteNo=e.siteNo,s.product.panelSize=e.panelSize,s.product.address=e.address,s.product.impressions=e.impressions,s.product.direction=e.direction,s.product.lighting=e.lighting,s.product.availableDates=e.availableDates,s.hideSelectedMarkerDetail=!1,l("productDetails").toggle()},s.deleteProductFromCampaign=function(e,a){c.deleteProductFromCampaign(a,e).then(function(e){var t;1==e.status?(g.success(e.message),t=a,c.getCampaignWithProducts(t).then(function(e){s.campaignDetails=e})):g.error(e.message)})},s.autoCompleteArea=function(e){return r.getAreasWithAutocomplete(e)},s.selectedAreaChanged=function(e){if(s.selectedArea=e){s.mapObj.setCenter({lat:Number(e.lat),lng:Number(e.lng)});var t=new google.maps.LatLngBounds;t.extend({lat:Number(e.lat),lng:Number(e.lng)}),s.mapObj.fitBounds(t)}},s.requestProposalForCampaign=function(e,t){c.requestCampaignProposal(e).then(function(e){1==e.status?n.show(n.alert().parent(angular.element(document.querySelector("body"))).clickOutsideToClose(!0).title("We will get back to you!!!!").textContent(e.message).ariaLabel("Alert Dialog Demo").ok("Got it!").targetEvent(t)):g.error(e.message)})},w=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,document.querySelector("#map-container").style.height=w<600?w-100+"px":w-64+"px",s.mapContainerHeightSet=!0}]);
"use strict";myApp.controller("HomeController",["$scope","NgMap",function(e,t){t.getMap().then(function(e){}),e.click=function(){alert(1)},e.firstThing="AAAAAAAAAAAAAA",e.otherThings=["BBBBBBB","CCCCCCCC"],e.topDirections=["left","up"],e.bottomDirections=["down","right"],e.isOpen=!1,e.availableModes=["md-fling","md-scale"],e.selectedMode="md-fling",e.availableDirections=["up","down","left","right"],e.selectedDirection="up"}]);
app.controller("PricingCtrl",["$scope","$mdDialog",function(o,e){o.showTabDialog=function(l){e.show({templateUrl:"views/sign-in.html",fullscreen:o.customFullscreen,clickOutsideToClose:!0})}}]);
app.controller("ProductAddCtrl",["$scope",function(t){t.statuses=["Planned","Confirmed","Cancelled"],t.options=["Option 1","Option 2","Option 3","Option 4","..."],t.submit=function(){},t.reset=function(){t.obj={name:"",myselect:"",status:""}},t.reset()}]);
app.controller("RegistrationCtrl",["$scope","$mdDialog","UserService","toastr",function(r,e,s,n){r.currentNavItem="users",r.showUserForm=!0,r.showUserRegPanel=function(){r.currentNavItem="users",r.showUserForm=!0},r.showAgencyRegPanel=function(){r.currentNavItem="agency",r.showUserForm=!1},r.user={},r.registerNewUser=function(){s.registerUser(r.user).then(function(e){1==e.status?n.success(e.message):0==e.status&&(r.regNewUserErrors=e.message)},function(e){n.error(e)})},r.agency={},r.registerNewAgency=function(){},r.close=function(){e.hide()}}]);
app.controller("UserProfileCtrl",["$scope","$stateParams","$window","UserService","Upload","config",function(a,e,n,o,i,l){a.getLoggedInUserProfile=function(){o.getProfile().then(function(e){a.userProfile=e})},a.getLoggedInUserProfile(),a.hoardingitems=[{cname:"Flipkart",phone:"(+91) 9878564523",email:"Lorem.ipsum.com",address:"K67/68, Sonal Heavy Indl Est,Lane Extn,Banjara Hills"},{cname:"LG",phone:"(+91) 9878564523",email:"Lorem.ipsum.com",address:"K67/68, Sonal Heavy Indl Est,Lane Extn,Banjara Hills"},{cname:"Iphone",phone:"(+91) 9878564523",email:"Lorem.ipsum.com",address:"K67/68, Sonal Heavy Indl Est,Lane Extn,Banjara Hills"}],a.limit=5,a.loadMore=function(){a.limit=a.items.length},a.uploadProfilePic=function(){i.upload({url:l.apiPath+"/update-profile-pic",data:{profile_pic:a.files.image}}).then(function(e){"1"==e.data.status&&n.location.reload()},function(e){},function(e){parseInt(100*e.loaded/e.total)})}}]);
app.controller("UserSettingsCtrl",["$scope","$stateParams","$mdDialog","UserService","toastr",function(s,e,t,r,o){function n(e){1==e.status?t.show({templateUrl:"views/verification-success.html",fullscreen:s.customFullscreen,clickOutsideToClose:!0,controller:function(e,s,t){e.showLogin=function(){t.hide(),s.path("/"),t.show({templateUrl:"views/sign-in.html",fullscreen:!0})}}}):o.error(e.message)}e.code&&(s.typeReset=!0),s.resetPwdObj={},s.resetPwdObj.code=e.code,s.resetPassword=function(){s.resetPwdObj.newPassword==s.resetPwdObj.confirmNewPassword?s.typeReset?r.resetPassword(s.resetPwdObj).then(function(e){n(e)}):r.changePassword(s.resetPwdObj).then(function(e){n(e)}):o.error("Passwords do not match.")}}]);
app.controller("AdminLocationCtrl",["$scope","$http","AdminLocationService","toastr",function(n,e,t,a){n.countryList=[],n.stateListForCountry=[],n.cityListForState=[],n.gridLocation={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},n.gridLocation.columnDefs=[{name:"country_name",displayName:"Country",enableCellEdit:!1,width:"10%"},{name:"state_name",displayName:"State ",width:"10%",enableCellEdit:!1},{name:"city_name",displayName:"City ",width:"10%"},{name:"name",displayName:"Area",width:"15%"},{name:"pincode",displayName:"Pincode",type:"number",width:"15%"},{name:"lat",displayName:"Latitude",width:"15%"},{name:"lng",displayName:"Longitude",width:"15%"},{name:"Action",field:"Action",width:"10%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],n.msg={},n.gridLocation.onRegisterApi=function(e){(n.gridApi=e).edit.on.afterCellEdit(n,function(e,t,i,a){n.msg.lastCellEdited="edited row id:"+e.id+" Column:"+t.name+" newValue:"+i+" oldValue:"+a,n.$apply()})},t.getAllAreas().then(function(e){n.gridLocation.data=e,n.listoflocationdata=e}),n.gridCountry={enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},n.gridCountry.columnDefs=[{name:"name",displayName:"Country Name",enableCellEdit:!1,width:"50%"},{name:"Action",field:"Action",width:"50%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a  style="cursor: pointer;" ng-href="" ng-click="grid.appScope.editCountry(row.entity)"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a style="cursor: pointer;" ng-href=""  ng-click="grid.appScope.deleteCountry(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],n.gridCountry.onRegisterApi=function(e){(n.gridApi=e).edit.on.afterCellEdit(n,function(e,t,i,a){n.msg.lastCellEdited="edited row id:"+e.id+" Column:"+t.name+" newValue:"+i+" oldValue:"+a,n.$apply()})},t.getCountries().then(function(e){n.countryList=e,n.gridCountry.data=e,n.countrtList=e}),n.gridState={enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},n.gridState.columnDefs=[{name:"country_name",displayName:"Country",enableCellEdit:!1,width:"33%"},{name:"name",displayName:"State ",width:"33%",enableCellEdit:!1},{name:"Action",field:"Action",width:"33%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a  style="cursor: pointer;" ng-href="" ng-click="grid.appScope.editState(row.entity)"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a style="cursor: pointer;" ng-href=""  ng-click="grid.appScope.deleteState(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],n.gridState.onRegisterApi=function(e){(n.gridApi=e).edit.on.afterCellEdit(n,function(e,t,i,a){n.msg.lastCellEdited="edited row id:"+e.id+" Column:"+t.name+" newValue:"+i+" oldValue:"+a,n.$apply()})},t.getAllStates().then(function(e){n.gridState.data=e,n.stateList=e}),n.gridCity={enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},n.gridCity.columnDefs=[{name:"country_name",displayName:"Country",enableCellEdit:!1,width:"25%"},{name:"state_name",displayName:"State",width:"25%",enableCellEdit:!1},{name:"name",displayName:"City",width:"25%",enableCellEdit:!1},{name:"Action",field:"Action",width:"25%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a style="cursor: pointer;" ng-href="" ng-click="grid.appScope.editCity(row.entity)"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a style="cursor: pointer;" ng-href=""  ng-click="grid.appScope.deleteCity(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],n.gridCity.onRegisterApi=function(e){(n.gridApi=e).edit.on.afterCellEdit(n,function(e,t,i,a){n.msg.lastCellEdited="edited row id:"+e.id+" Column:"+t.name+" newValue:"+i+" oldValue:"+a,n.$apply()})},t.getAllCities().then(function(e){n.gridCity.data=e,n.citylocationdata=e}),n.gridArea={enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},n.gridArea.columnDefs=[{name:"country_name",displayName:"Country",enableCellEdit:!1,width:"15%"},{name:"state_name",displayName:"State",width:"15%",enableCellEdit:!1},{name:"city_name",displayName:"City",width:"15%",enableCellEdit:!1},{name:"name",displayName:"Area",width:"15%",enableCellEdit:!1},{name:"pincode",displayName:"Pincode",width:"10%",enableCellEdit:!1},{name:"lat",displayName:"Latitude",width:"10%",enableCellEdit:!1},{name:"lng",displayName:"Longitude",width:"10%",enableCellEdit:!1},{name:"Action",field:"Action",width:"10%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a ng-href="" ng-click="grid.appScope.editArea(row.entity)" style="cursor:pointer;"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a style="cursor: pointer;" ng-href="" ng-click="grid.appScope.deleteArea(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],n.gridArea.onRegisterApi=function(e){(n.gridApi=e).edit.on.afterCellEdit(n,function(e,t,i,a){n.msg.lastCellEdited="edited row id:"+e.id+" Column:"+t.name+" newValue:"+i+" oldValue:"+a,n.$apply()})},t.getAllAreas().then(function(e){n.gridArea.data=e}),n.saveCountry=function(){t.saveCountry(n.country.name).then(function(e){1==e.status?(a.success("Country added to database successfully!"),t.getCountries().then(function(e){n.gridCountry.data=e,n.saveCountryErrors=null,n.country.name=null})):0==e.status&&(n.saveCountryErrors=e.message)})},n.deleteCountry=function(i){t.deleteCountry(i.id).then(function(e){if(1==e.status){var t=n.gridCountry.data.indexOf(i);n.gridCountry.data.splice(t,1),a.success(e.message)}else a.error(e.message)})},n.editCountry=function(e){n.country=e},n.getStateList=function(e){t.getStates(e).then(function(e){n.stateListForCountry=e})},n.getCityList=function(e){t.getCities(e).then(function(e){n.cityListForState=e})},n.saveState=function(){t.saveState(n.state).then(function(e){1==e.status?(a.success("State added to database successfully!"),t.getAllStates().then(function(e){n.gridState.data=e,n.stateErrors.errorMsg=null,n.state=void 0})):0==e.status&&(n.stateErrors={errorMsg:e.message})})},n.deleteState=function(i){t.deleteState(i.id).then(function(e){if(1==e.status){var t=n.gridState.data.indexOf(i);n.gridState.data.splice(t,1),a.success(e.message)}else a.error(e.message)})},n.editState=function(e){n.state={},n.state.country_id=e.country_id,n.state.state_name=e.name},n.saveCity=function(){t.saveCity(n.city).then(function(e){1==e.status?(a.success("City added to database successfully!"),t.getAllCities().then(function(e){n.gridCity.data=e,n.cityErrors=null})):0==e.status&&(n.cityErrors=e.message)})},n.deleteCity=function(i){t.deleteCity(i.id).then(function(e){if(1==e.status){var t=n.gridCity.data.indexOf(i);n.gridCity.data.splice(t,1),a.success(e.message)}else a.error(e.message)})},n.editCity=function(e){n.city={},n.city.country_id=e.country_id,n.city.state_id=e.state_id,n.city.city_name=e.name,n.city.country_id=null,n.city.state_id=null},n.saveArea=function(){t.saveArea(n.area).then(function(e){1==e.status?(a.success("Area added to database successfully!"),t.getAllAreas().then(function(e){n.gridArea.data=e,n.areaErrors=null})):0==e.status&&(n.areaErrors=e.message)})},n.editArea=function(e){n.area=e,n.area.state_id=null,n.area.city_id=null,n.area.area_name=e.name},n.deleteArea=function(i){t.deleteArea(i.id).then(function(e){if(1==e.status){var t=n.gridArea.data.indexOf(i);n.gridArea.data.splice(t,1),a.success(e.message)}else a.error(e.message)})},n.editArea=function(e){n.area={},n.area=e,n.area.area_name=e.name,n.area.country_id=null,n.area.state_id=null,n.area.city_id=null},n.resetAreaForm=function(){n.area={}};var i=n;i.limit=5,n.loadMore=function(){var e=i.limit+5;i.limit=e>n.listoflocationdata.length?n.listoflocationdata.length:e};var l=n;l.limit=5,n.loadMore=function(){var e=i.limit+5;l.limit=e>n.stateList.length?n.stateList.length:e};var d=n;d.limit=5,n.loadMore=function(){var e=i.limit+5;d.limit=e>n.citylocationdata.length?n.citylocationdata.length:e}}]);
app.controller("AdminMgrAppCtrl",["$scope","$mdDialog","$mdSidenav","$rootScope","$interval","$timeout","$location","AdminNotificationService","config",function(e,t,n,a,o,i,s,c,r){a.serverUrl=r.serverUrl,localStorage.isAuthenticated&&localStorage.loggedInUser&&(a.isAuthenticated=localStorage.isAuthenticated||!1,a.loggedInUser=JSON.parse(localStorage.loggedInUser)),e.closeSidenav=function(){n("left").toggle()},e.closeSideNavPanel=function(){n("right").toggle()},e.items=[{campaignname:"Flipkart",clientcomapanyname:"Neon",clientname:"Chanikya",clientcontent:"9966016136",startdate:"12-Fed-2017",enddate:"28-Feb-2017",status:"Draft",price:"25000",products:"0"},{campaignname:"Amezon",clientcomapanyname:"Amezon",clientname:"shiva",clientcontent:"9966016136",startdate:"12-Fed-2017",enddate:"28-Feb-2017",status:"Draft",price:"30000",products:"0"},{campaignname:"Paytm",clientcomapanyname:"Paytm",clientname:"srikanth",clientcontent:"9966016136",startdate:"12-Fed-2017",enddate:"28-Feb-2017",status:"Draft",price:"50000",products:"0"}],e.floorDetails={roomDetails:[{bedIds:[]},{bedIds:[]},{bedIds:[]}]},e.showFormats=!1,e.toogelMenu=function(){e.showFormats=!e.showFormats},e.showLocation=!1,e.toogelLocation=function(){e.showLocation=!e.showLocation},e.showArea=!1,e.toogelLocation=function(){e.showArea=!e.showArea},e.adminNotifs=[];var l=function(){e.notifs&&0<e.notifs.length&&moment.utc(e.adminNotifs[0].updated_at).valueOf(),c.getAllAdminNotifications().then(function(t){e.adminReadNotifCount=_.chain(t).filter(function(t){return 1==t.status}).value().length,e.adminUnreadNotifCount=_.chain(t).filter(function(t){return 0==t.status}).value().length,e.adminNotifs=_.union(e.adminNotifs,t),i(l,1e3)})};l(),e.showCampaignDetails=function(t){c.updateNotifRead(t).then(function(t){1==t.status?l():toastr.error(t.message)}),n("right").toggle(),s.path("/admin/home")}}]);
app.controller("callCenterCtrl",["$scope","$http","toastr",function(a,e,l){a.gridcallCenter={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},a.gridcallCenter.columnDefs=[{name:"id",displayName:"Sr.no",enableCellEdit:!1,width:"20%",enableFiltering:!1},{name:"phonenumber",displayName:"Phone Number",width:"40%",enableCellEdit:!1},{name:"Action",field:"Action",width:"40%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">remove_red_eye</i></md-icon></a></span><span><a href="" ng-click="grid.appScope.deleteCallCenterInfo(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],a.msg={},a.gridcallCenter.onRegisterApi=function(e){(a.gridApi=e).edit.on.afterCellEdit(a,function(e,n,l,i){a.msg.lastCellEdited="edited row id:"+e.id+" Column:"+n.name+" newValue:"+l+" oldValue:"+i,a.$apply()})},e.get("fakedb/company.json").success(function(e){for(i=0;i<e.length;i++)e[i].registered=new Date(e[i].registered);a.gridcallCenter.data=e}),a.deleteCallCenterInfo=function(e){var n=a.gridcallCenter.data.indexOf(e);a.gridcallCenter.data.splice(n,1),l.success("CallCenterInfo deleted successfully")}}]);
app.controller("AdminCampaignCtrl",["$scope","$mdDialog","$stateParams","CampaignService","AdminCampaignService","Upload","toastr","FileSaver","Blob",function(n,e,a,l,i,d,s,t,r){if(a.campaignId){var g=a.campaignId;l.getCampaignWithProducts(g).then(function(e){})}n.showAddCampaignPopup=function(){e.show({templateUrl:"views/admin/add-full-campaign.html",clickOutsideToClose:!0,fullscreen:n.customFullscreen,controller:function(a,l,e,i){a.campaign={},a.saveCampaign=function(){e.saveCampaign(a.campaign).then(function(e){1==e.status?(i.success(e.message),l.hide()):0==e.status&&(a.campaignDetailsErrorEessages=e.message)},function(e){a.campaignDetailsErrorEessages="somthing went wrong please try again after some time!"})},a.close=function(){l.hide()}}})},n.cancel=function(){e.hide()},n.gridPreLaunch={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},n.gridPreLaunch.columnDefs=[{name:"created_by",displayName:"Created By",enableCellEdit:!1,width:"5%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:"<div>{{ row.entity.created_by }}, {{ row.entity.delegated_to | PickFirst2Letters }}</div>"},{name:"name",displayName:"Campagin Name ",width:"15%",enableCellEdit:!1,headerCellClass:"grid-align",cellClass:"grid-align"},{name:"user_full_name",displayName:"Client Name",width:"15%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"user_phone",displayName:"Client Contact",type:"number",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"start_date",displayName:"Start Date",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:'<div>{{ row.entity.start_date | dateify | date:"dd-MM-yyyy" }}</div>'},{name:"end_date",displayName:"End Date",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:'<div>{{ row.entity.end_date | dateify | date:"dd-MM-yyyy" }}</div>'},{name:"status",displayName:"Status",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:"<div>{{ row.entity.status | stringifyCampaignStatus }}</div>"},{name:"est_budget",displayName:"Estimated Budget",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"products",displayName:"Products",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:"<div>{{row.entity.products.length}}</div>"},{name:"Action",field:"Action",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:'<div class="ui-grid-cell-contents"><span><a ng-href="#/admin/campaign-proposal-summary/{{row.entity.id}}" ng-click="" ng-if="row.entity.status != 0"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">done</i></md-icon></a></span><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">share</i></md-icon></a></span><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],n.msg={},n.gridPreLaunch.onRegisterApi=function(e){(n.gridApi=e).edit.on.afterCellEdit(n,function(e,a,l,i){n.msg.lastCellEdited="edited row id:"+e.id+" Column:"+a.name+" newValue:"+l+" oldValue:"+i,n.$apply()})},i.getAllCampaigns().then(function(e){n.personalcampsdata=e}),n.gridRunning={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},n.gridRunning.columnDefs=[{name:"id",displayName:"ID ",enableCellEdit:!1,width:"5%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"campaignname",displayName:"Campagin Name ",width:"15%",enableCellEdit:!1,headerCellClass:"grid-align",cellClass:"grid-align"},{name:"clientname",displayName:"Client Name",width:"15%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"clientcontent",displayName:"Client Contact",type:"number",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"startdate",displayName:"Start Date",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"enddate",displayName:"End Date",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"Runningstatus",displayName:"Status",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"price",displayName:"Price",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"products",displayName:"Products",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"Action",field:"Action",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:'<div class="ui-grid-cell-contents"><span><a ng-href="#/admin/campaign-running-summary"><md-icon><i class="material-icons">remove_red_eye</i></md-icon></a></span><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">share</i></md-icon></a></span></div>',enableFiltering:!1}],n.msg={},n.gridRunning.onRegisterApi=function(e){(n.gridApi=e).edit.on.afterCellEdit(n,function(e,a,l,i){n.msg.lastCellEdited="edited row id:"+e.id+" Column:"+a.name+" newValue:"+l+" oldValue:"+i,n.$apply()})},n.gridClosed={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},n.gridClosed.columnDefs=[{name:"id",displayName:"ID ",enableCellEdit:!1,width:"5%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"campaignname",displayName:"Campagin Name ",width:"15%",enableCellEdit:!1,headerCellClass:"grid-align",cellClass:"grid-align"},{name:"clientname",displayName:"Client Name",width:"15%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"clientcontent",displayName:"Client Contact",type:"number",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"startdate",displayName:"Start Date",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"enddate",displayName:"End Date",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"Closedstatus",displayName:"Status",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"price",displayName:"Price",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"products",displayName:"Products",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"Action",field:"Action",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:'<div class="ui-grid-cell-contents"><span><a ng-href="#/admin/campaign-closed-summary"><md-icon><i class="material-icons">remove_red_eye</i></md-icon></a></span></div>',enableFiltering:!1}],n.msg={},n.gridClosed.onRegisterApi=function(e){(n.gridApi=e).edit.on.afterCellEdit(n,function(e,a,l,i){n.msg.lastCellEdited="edited row id:"+e.id+" Column:"+a.name+" newValue:"+l+" oldValue:"+i,n.$apply()})};var m=n;m.limit=10,n.loadMore=function(){var e=m.limit+5;m.limit=e>n.personalcampsdata.length?n.personalcampsdata.length:e},n.formRows=[{formId:"1",name:"floatginCampaignForm1"}],n.addNewFormRow=function(){var e=n.formRows.length+2;n.formRows.push({formId:e,name:"floatingCampaignForm"+e})},n.generateFloatingCampaignPdf=function(){d.upload({url:config.apiPath+"/floating-campaign-pdf",data:{product_arr:n.formRows},responseType:"arraybuffer"}).then(function(e){if(e.data){var a=new r([e.data],{type:"application/pdf;charset=utf-8"});t.saveAs(a,"Campaigns Proposal.pdf")}else s.error(e.message)},function(e){},function(e){parseInt(100*e.loaded/e.total)})}}]);
app.controller("CampaignProposalCtrl",["$scope","$mdDialog","$stateParams","$mdSidenav","$location","CampaignService","AdminCampaignService","config","toastr",function(l,s,e,a,i,t,n,o,c){function r(a){t.getCampaignWithProducts(a).then(function(e){l.campaignDetails=e,l.gridCampaignProducts.data=e.products,7<e.status&&d(a)})}function d(e){7<=l.campaignDetails.status?n.getCampaignPaymentDetails(e).then(function(e){l.campaignPayments=e}):c.error("Payments are only available for running or stopped campaigns.")}e.campaignId&&r(e.campaignId);l.gridCampaignProducts={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,rowHeight:60},l.gridCampaignProducts.columnDefs=[{name:"format_name",displayName:"Type ",width:"15%",enableCellEdit:!1,headerCellClass:"grid-align",cellClass:"grid-align"},{name:"area_name",displayName:"Area",width:"15%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"panelSize",displayName:"Size",type:"number",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align"},{name:"lighting",displayName:"Lighting",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:"<div>{{row.entity.lighting | boolToYesNo}}</div>"},{name:"from_date",displayName:"Start Date",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:'<div>{{ row.entity.from_date | dateify | date:"dd-MM-yyyy" }}</div>'},{name:"to_date",displayName:"End Date",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:'<div>{{ row.entity.to_date | dateify | date:"dd-MM-yyyy" }}</div>'},{name:"View",displayName:"Image ",field:"Action",width:"7%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:'<div class="ui-grid-cell-contents"><span><md-button ng-click="grid.appScope.viewProductImage(row.entity.image)" class="md-icon-button"><md-icon><i class="material-icons">remove_red_eye</i></md-icon></md-button></span></div>',enableFiltering:!1},{name:"price",displayName:"Price",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",enableFiltering:!1},{name:"Action",field:"Action",width:"10%",headerCellClass:"grid-align",cellClass:"grid-align",cellTemplate:'<div class="ui-grid-cell-contents" ng-if="grid.appScope.campaignDetails.status < 4 || grid.appScope.campaignDetails.status == 5"><span><a ng-click="grid.appScope.editProposedProduct(row.entity.id, row.entity.from_date, row.entity.to_date, row.entity.price)" style="cursor:pointer;"><md-icon><i class="material-icons">edit</i></md-icon></a></span><span><a ng-href="#"><md-icon><i class="material-icons">done</i></md-icon></a></span><span><a ng-href="#"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],l.msg={},l.gridCampaignProducts.onRegisterApi=function(e){(l.gridApi=e).edit.on.afterCellEdit(l,function(e,a,i,t){l.msg.lastCellEdited="edited row id:"+e.id+" Column:"+a.name+" newValue:"+i+" oldValue:"+t,l.$apply()})},l.addNewProductToCampaign=function(){localStorage.campaignForSuggestion=JSON.stringify(l.campaignDetails),i.path("/admin/suggest-products")},l.viewProductImage=function(e){var a=o.serverUrl+e;s.show({locals:{src:a},templateUrl:"views/image-popup-large.html",fullscreen:l.customFullscreen,clickOutsideToClose:!0,controller:function(e,a){e.img_src=a}})},l.editProposedProduct=function(e,a,i,t){var n={id:e,from_date:a,to_date:i,price:t};s.show({locals:{campaignId:l.campaignDetails.id,productObj:n,ctrlScope:l},templateUrl:"views/admin/edit-proposed-product.html",fullscreen:l.customFullscreen,clickOutsideToClose:!0,controller:function(a,i,t,n,l,s,e){a.product=e,a.updateProposedProduct=function(e){n.updateProposedProduct(s,a.product).then(function(e){1==e.status?(t.getCampaignWithProducts(s).then(function(e){l.campaignDetails=e,l.gridCampaignProducts.data=e.products,i.hide()}),c.success(e.message)):c.error(e.message)})},a.cancel=function(){i.hide()}}})},l.finalizeCampaign=function(){l.campaignDetails.act_budget>l.campaignDetails.exp_budget?confirm("Actual budget is larger than Expected budget. Are you sure you want to finalize this campaign?")&&n.finalizeCampaignByAdmin(l.campaignDetails.id).then(function(e){1==e.status?(l.campaignDetails.status=4,c.success("Campaign Finalized!")):c.error(e.message)}):n.finalizeCampaignByAdmin(l.campaignDetails.id).then(function(e){1==e.status?(l.campaignDetails.status=4,c.success("Campaign Finalized!")):c.error(e.message)})},l.closeInputPanel=function(){a("ClientRequest").toggle()},l.launchCampaign=function(a,i){n.launchCampaign(a).then(function(e){1==e.status?(s.show(s.alert().parent(angular.element(document.querySelector("body"))).clickOutsideToClose(!0).title("Congrats!!").textContent(e.message).ariaLabel("Alert Dialog Demo").ok("Got it!").targetEvent(i)),r(a)):c.error(e.message)})},l.showUpdatePaymentForm=function(){s.show({locals:{campaignId:l.campaignDetails.id,ctrlScope:l},templateUrl:"views/admin/update-campaign-payment.html",fullscreen:l.customFullscreen,clickOutsideToClose:!0,controller:function(a,e,i,t,n,l){a.paymentTypes=[{name:"Cash"},{name:"Cheque"},{name:"Online"},{name:"Transfer"}],a.updateCampaignPayment=function(){a.campaignPayment.campaign_id=l,t.updateCampaignPayment(a.campaignPayment).then(function(e){1==e.status?(d(l),c.success(e.message),a.cancel()):c.error(e.message)})},a.cancel=function(){e.hide()}}})},l.closeCampaign=function(a,i){n.closeCampaign(a).then(function(e){1==e.status?(s.show(s.alert().parent(angular.element(document.querySelector("body"))).clickOutsideToClose(!0).title("Success!!").textContent(e.message).ariaLabel("Alert Dialog Demo").ok("Got it!").targetEvent(i)),r(a)):c.error(e.message)})};var g=l;g.limit=10,l.loadMore=function(){var e=g.limit+5;g.limit=e>l.personalcampsdata.length?l.personalcampsdata.length:e}}]);
app.controller("CompanyCtrl",["$scope","$mdDialog","$http","CompanyService","toastr",function(o,a,e,n,i){var t;o.msg={},o.cancel=function(){a.hide()},o.showAddCompanyPopup=function(e){a.show({templateUrl:"views/admin/add-company-popup.html",fullscreen:o.customFullscreen,clickOutsideToClose:!0,preserveScope:!0,scope:o})},o.gridCompany={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},o.gridCompany.columnDefs=[{name:"name",displayName:"Company Name",enableCellEdit:!1,width:"15%"},{name:"client_type",displayName:"Client Type ",width:"15%",enableCellEdit:!1},{name:"person_name",displayName:"Person Name ",width:"20%"},{name:"email",displayName:"Email",width:"15%"},{name:"phone",displayName:"Phone",type:"number",width:"15%"},{name:"address",displayName:"Address",width:"15%"},{name:"Action",field:"Action",width:"5%",cellTemplate:'<div class="ui-grid-cell-contents "><span><a href="" ng-click="grid.appScope.editCompany(row.entity)"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span></div>',enableFiltering:!1}],o.gridCompany.onRegisterApi=function(e){(o.gridApi=e).edit.on.afterCellEdit(o,function(e,n,a,i){o.msg.lastCellEdited="edited row id:"+e.id+" Column:"+n.name+" newValue:"+a+" oldValue:"+i,o.$apply()})},n.getCompanies().then(function(e){o.gridCompany.data=e,o.companyList=e}),o.addCompany=function(){n.saveCompany(o.company).then(function(e){1==e.status?(n.getCompanies().then(function(e){o.gridCompany.data=e}),i.success(e.message),a.hide()):0==e.status&&(o.comapnyErrors=e.message)},function(e){i.error("somthing went wrong please try again later!")})},o.editCompany=function(e){o.company=e;var n=o.gridCompany.data.indexOf(e);o.gridCompany.data.splice(n,1),a.show({templateUrl:"views/admin/add-company-popup.html",fullscreen:o.customFullscreen,clickOutsideToClose:!0,preserveScope:!0,scope:o})},o.cancel=function(){a.hide()},o.showAddHoardingCompanyPopup=function(e){a.show({templateUrl:"views/admin/add-hoarding-company-popup.html",fullscreen:o.customFullscreen,clickOutsideToClose:!0})},o.gridHoardingCompany={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},o.gridHoardingCompany.columnDefs=[{name:"name",displayName:"Comapny Name",width:"20%",enableCellEdit:!1},{name:"owner",displayName:"Owner Name",width:"20%",enableCellEdit:!1},{name:"email",displayName:"Email id (editable)",width:"20%"},{name:"phone",displayName:"Phone",type:"number",width:"20%"},{name:"hoardinglist",displayName:"List fo hoarding",width:"10%"},{name:"Action",field:"Action",width:"10%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a href="" ng-click=""><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a href="" ng-click=""><md-icon><i class="material-icons">done</i></md-icon></a></span><span><a href="" ng-click="grid.appScope.deleteHoardingCompany(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],o.gridHoardingCompany.onRegisterApi=function(e){(o.gridApi=e).edit.on.afterCellEdit(o,function(e,n,a,i){o.msg.lastCellEdited="edited row id:"+e.id+" Column:"+n.name+" newValue:"+a+" oldValue:"+i,o.$apply()})},n.getHoardingCompanies().then(function(e){o.gridHoardingCompany.data=e,o.hoardingCompany=e}),o.addHoardingCompany=function(){n.saveHoardingCompany(o.hoardingCompany).then(function(e){1==e.status?(n.getHoardingCompanies().then(function(e){o.gridHoardingCompany.data=e}),i.success(e.message),a.hide()):0==e.status&&(o.addHordingErrors=e.message)},function(e){i.error("somthing went wrong please try again")})},o.deleteHoardingCompany=function(e){var n=o.gridHoardingCompany.data.indexOf(e);o.gridHoardingCompany.data.splice(n,1),i.success("HoardingCompanies deleted successfully")},(t=o).limit=10,o.loadMore=function(){var e=t.limit+5;t.limit=e>o.companyList.length?o.companyList.length:e},(t=o).limit=10,o.loadMore=function(){var e=t.limit+5;t.limit=e>o.hoardingCompany.length?o.hoardingCompany.length:e}}]);
app.controller("AdminFeedsCtrl",["$scope","$mdDialog","$http","$mdSidenav","$location","AdminCampaignService","ProductService","toastr",function(t,i,e,a,o,n,c,s){t.msg={},t.limit=3,t.pageNo=1,t.productList=[],t.loadProductList=function(){c.getProductForPage(t.pageNo).then(function(e){if(localStorage.campaignForSuggestion){var a=JSON.parse(localStorage.campaignForSuggestion);t.campaignStartDate=a.start_date,t.campaignEndDate=a.end_date,t.campaignEstBudget=a.est_budget,t.campaignActBudget=a.act_budget,a.products&&0<a.products.length&&_.map(e,function(e){if(void 0!==_.find(JSON.parse(localStorage.campaignForSuggestion).products,{id:e.id}))return e.alreadyAdded=!0,e})}t.pageNo+=1,t.productList=t.productList.concat(e)})},t.loadProductList(),n.getAllCampaignRequests().then(function(e){t.requestList=e}),t.showCampaignDetailsPopup=function(e,a){t.selectedRequestDetails=a,i.show({templateUrl:"views/admin/campaign-details-popup.html",fullscreen:t.customFullscreen,clickOutsideToClose:!0,preserveScope:!0,scope:t})},t.createCampaignToSuggest=function(e){i.show({locals:{emptyCampaign:e,campaignPartial:t.selectedRequestDetails},templateUrl:"views/admin/add-campaign.html",clickOutsideToClose:!0,fullscreen:t.customFullscreen,controller:function(e,a,t,i,o,n){i=_.extend(i,o),e.campaign=i,e.saveCampaign=function(){t.saveCampaign(e.campaign).then(function(e){1==e.status?(n.success(e.message),a.hide()):n.error(e.message)})},e.close=function(){a.hide()}}})},t.suggestProductForCampaign=function(a){if(localStorage.campaignForSuggestion){var e={campaign_id:JSON.parse(localStorage.campaignForSuggestion).id,product:{id:a.id,from_date:a.start_date,to_date:a.end_date,price:a.price}};n.proposeProductForCampaign(e).then(function(e){1==e.status?(n.getCampaignWithProducts(JSON.parse(localStorage.campaignForSuggestion).id).then(function(e){localStorage.campaignForSuggestion=JSON.stringify(e),t.campaignActBudget=e.act_budget,_.map(t.productList,function(e){return e.id==a.id&&(e.alreadyAdded=!0),e})}),s.success(e.message)):s.error(e.message)})}else s.error("No Campaign is seleted. Please select which campaign you're adding this product in to.")},t.removeProductFromCampaignSuggestion=function(a){var e=JSON.parse(localStorage.campaignForSuggestion).id;n.deleteProductFromCampaign(e,a).then(function(e){1==e.status?(n.getCampaignWithProducts(JSON.parse(localStorage.campaignForSuggestion).id).then(function(e){localStorage.campaignForSuggestion=JSON.stringify(e),t.campaignActBudget=e.act_budget}),_.map(t.productList,function(e){return e.id==a&&(e.alreadyAdded=!1),e})):s.error(e.message)})},t.viewAndLaunchCampaign=function(e){localStorage.campaignForSuggestion=JSON.stringify(t.selectedRequestDetails),o.path("/admin/campaign-proposal-summary/"+e)},t.prepareQuoteForCampaign=function(e){localStorage.campaignForSuggestion=JSON.stringify(t.selectedRequestDetails),o.path("/admin/campaign-proposal-summary/"+e)},t.loadMore=function(){t.limit=t.items.length},t.closeInputPanel=function(e){a("ClientRequest").toggle()}}]);
app.controller("ProductCtrl",["$scope","$mdDialog","$http","ProductService","AdminLocationService","CompanyService","config","Upload","toastr",function(n,t,e,i,a,o,s,l,d){var r=this;n.msg={},n.countryList=[],n.stateList=[],n.cityList=[],n.areaList=[],n.hoardingCompaniesList=[],n.test="test",n.showFormatForm=function(e){t.show({templateUrl:"views/admin/add-format-popup.html",fullscreen:n.customFullscreen,clickOutsideToClose:!0,preserveScope:!0,scope:n})},n.gridFormats={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},n.generateImageTemplate=function(e){return s.serverUrl+e},n.gridFormats.columnDefs=[{name:"image",displayName:"Icon",width:"40%",enableCellEdit:!1},{name:"name",displayName:"Format Type",enableCellEdit:!1,width:"30%"},{name:"Action",field:"Action",width:"30%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a href="" ng-click="grid.appScope.editFormat(row.entity)"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a ng-href="#" ng-click="grid.appScope.deleteFormat(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],n.gridFormats.onRegisterApi=function(e){(n.gridApi=e).edit.on.afterCellEdit(n,function(e,t,a,i){n.msg.lastCellEdited="edited row id:"+e.id+" Column:"+t.name+" newValue:"+a+" oldValue:"+i,n.$apply()})},i.getFormatList().then(function(e){n.gridFormats.data=e,n.formatList=e}),n.format={},n.addFormat=function(){l.upload({url:s.apiPath+"/format",data:{image:n.files.image,format:n.format}}).then(function(e){1==e.data.status?(i.getFormatList().then(function(e){n.gridFormats.data=e}),d.success(e.data.message)):0==e.data.status&&(n.addFormatErrors=e.data.message)},function(e){d.error("somthing went wrong please try again later")},function(e){parseInt(100*e.loaded/e.total)})},n.editFormat=function(e){n.format=e,t.show({templateUrl:"views/admin/add-format-popup.html",fullscreen:n.customFullscreen,clickOutsideToClose:!0,preserveScope:!0,scope:n})},n.deleteFormat=function(a){i.deleteFormat(a.id).then(function(e){if(1==e.status){var t=n.gridFormats.data.indexOf(a);n.gridFormats.data.splice(t,1),d.success(e.message)}else d.error(e.message)})},a.getCountries().then(function(e){n.countryList=e}),o.getHoardingCompanies().then(function(e){n.hoardingCompaniesList=e}),n.getStateList=function(){console.log("$scope.product.country",n.product.country),a.getStates(n.product.country).then(function(e){n.stateList=e,console.log("$scope.stateList",n.stateList)})},n.getCityList=function(){a.getCities(n.product.state).then(function(e){n.cityList=e})},n.getAreaList=function(){a.getAreas(n.product.city).then(function(e){n.areaList=e})},n.showProductForm=function(e){n.product={},t.show({templateUrl:"views/admin/add-product-popup.html",fullscreen:n.customFullscreen,clickOutsideToClose:!0,preserveScope:!0,scope:n})},n.gridProducts={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},n.gridProducts.columnDefs=[{name:"siteNo",displayName:"Site No",enableCellEdit:!1,width:"15%"},{name:"format_name",displayName:"Site type",enableCellEdit:!1,width:"10%"},{name:"company_name",displayName:"Company",enableCellEdit:!1,width:"10%"},{name:"address",displayName:"Address",width:"15%",enableCellEdit:!1},{name:"impressions",displayName:"Impression",width:"10%",enableCellEdit:!1},{name:"area_name",displayName:"Area",width:"20%"},{name:"panelSize",displayName:"Panel Size",type:"number",width:"20%"},{name:"lighting",displayName:"lighting",width:"10%"},{name:"direction",displayName:"Direction",width:"10%",enableCellEdit:!1},{name:"image",displayName:"Image",width:"10%",enableCellEdit:!1},{name:"symbol",displayName:"Symbol",width:"10%",enableCellEdit:!1},{name:"Action",field:"Action",width:"10%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a href="" ng-click="grid.appScope.editProduct(row.entity)"><md-icon><i class="material-icons">mode_edit</i></md-icon></a></span><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">done</i></md-icon></a></span><span><a href="" ng-click="grid.appScope.deleteProduct(row.entity)"><md-icon><i class="material-icons">delete</i></md-icon></a></span></div>',enableFiltering:!1}],n.gridProducts.onRegisterApi=function(e){(n.gridApi=e).edit.on.afterCellEdit(n,function(e,t,a,i){n.msg.lastCellEdited="edited row id:"+e.id+" Column:"+t.name+" newValue:"+a+" oldValue:"+i,n.$apply()})},i.getProductList().then(function(e){n.gridProducts.data=e,n.hoardinglistdata=e}),n.product={},n.files={},n.addProduct=function(){l.upload({url:s.apiPath+"/product",data:{image:n.files.image,symbol:n.files.symbol,product:n.product}}).then(function(e){"1"==e.data.status?(i.getProductList().then(function(e){n.gridProducts.data=e}),d.success(e.data.message)):0==e.data.status&&(n.addProductErrors=e.data.message)},function(e){d.error("somthing went wrong try again later")},function(e){parseInt(100*e.loaded/e.total)})},n.editProduct=function(e){console.log(e),e.country=null,e.state=null,e.city=null,e.area=null,n.product=e,t.show({templateUrl:"views/admin/add-product-popup.html",fullscreen:n.customFullscreen,clickOutsideToClose:!0,preserveScope:!0,scope:n})},n.deleteProduct=function(a){i.deleteProduct(a.id).then(function(e){if(1==e.status){var t=n.gridProducts.data.indexOf(a);n.gridProducts.data.splice(t,1),d.success(e.message)}else d.error(e.message)})},n.simulateQuery=!1,n.isDisabled=!1,n.querySearch=function(e){return i.searchProducts(e.toLowerCase()).then(function(e){return e})},n.selectedItemChange=function(e){},n.searchTextChange=function(e){},n.cancel=function(){t.cancel()},(r=n).limit=5,n.loadMore=function(){var e=r.limit+5;r.limit=e>n.hoardinglistdata.length?n.hoardinglistdata.length:e}}]);
app.controller("AdminRegistrationCtrl",["$scope","$mdDialog","$http","$rootScope","$auth","toastr","AdminUserService",function(a,n,e,t,i,s,d){a.msg={},a.registrationPopup=function(e){n.show({templateUrl:"views/admin/registration-popup.html",fullscreen:a.customFullscreen,clickOutsideToClose:!0,preserveScope:!0,scope:a})},a.isUserOwner=-1!=_.indexOf(_.pluck(i.getPayload().user.roles,"name"),"owner"),a.userChecked=!0,a.showUser=function(){a.userChecked=!0},a.showAgency=function(){a.userChecked=!1},a.gridUsers={paginationPageSizes:[25,50,75],paginationPageSize:10,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},a.gridUsers.columnDefs=[{name:"name",displayName:"Name (editable)",width:"20%",enableCellEdit:!1,cellTemplate:"<div>{{row.entity.first_name}} {{row.entity.last_name}}</div>"},{name:"activated",displayName:"Activated",width:"10%",cellTemplate:'<div style="text-align:center;">{{row.entity.activated | boolToYesNo}}</div>'},{name:"email",displayName:"Email id (editable)",width:"20%"},{name:"phone",displayName:"Phone",type:"number",width:"10%"},{name:"company_name",displayName:"Company(editable)",width:"15%"},{name:"company_type",displayName:"TypeofCompany(editable)",width:"15%"},{name:"Action",field:"Action",width:"10%",cellTemplate:'<div class="ui-grid-cell-contents "><span > <md-menu><md-button ng-click="$mdOpenMenu($event)" class="md-icon-button"><md-icon><i class="material-icons">settings</i></md-icon> </md-button><md-menu-content><md-menu-item><md-button ng-href="#">Edit</md-button></md-menu-item><md-menu-item ng-if="grid.appScope.isUserOwner && !row.entity.activated"><md-button ng-click="grid.appScope.activateUser(row.entity.id)">Activate</md-button></md-menu-item><md-menu-item><md-button ng-click="grid.appScope.deleteUser(row.entity.id)">Delete</md-button></md-menu-item></md-menu-content</md-menu></span></div>',enableFiltering:!1}],a.gridUsers.onRegisterApi=function(e){(a.gridApiUser=e).edit.on.afterCellEdit(a,function(e,n,t,i){a.msg.lastCellEdited="edited row id:"+e.id+" Column:"+n.name+" newValue:"+t+" oldValue:"+i,a.$apply()})},d.getUsers().then(function(e){a.gridUsers.data=e,a.userList=e,console.log(a.userList)}),a.gridAgency={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},a.gridAgency.columnDefs=[{name:"company_name",displayName:"Ad Agency Name",width:"25%",enableCellEdit:!1},{name:"email",displayName:"Email id (editable)",width:"25%"},{name:"phone",displayName:"Phone",type:"number",width:"25%"},{name:"company_type",displayName:"TypeofCompany(editable)",width:"15%"},{name:"Action",field:"Action",width:"10%",cellTemplate:'<div class="ui-grid-cell-contents"><span > <md-menu><md-button ng-click="$mdOpenMenu($event)" class="md-icon-button"><md-icon><i class="material-icons">settings</i></md-icon> </md-button><md-menu-content><md-menu-item><md-button ng-href="#">Edit</md-button></md-menu-item><md-menu-item><md-button>Share</md-button></md-menu-item><md-menu-item><md-button>Delete</md-button></md-menu-item></md-menu-content</md-menu></span></div>',enableFiltering:!1}],a.gridAgency.onRegisterApi=function(e){(a.gridApiAgencies=e).edit.on.afterCellEdit(a,function(e,n,t,i){a.msg.lastCellEdited="edited row id:"+e.id+" Column:"+n.name+" newValue:"+t+" oldValue:"+i,a.$apply()})},d.getAgencies().then(function(e){a.gridAgency.data=e}),a.addUser=function(){d.saveUser(a.user).then(function(e){console.log("working"),1==e.status?(d.getUsers().then(function(e){a.gridUsers.data=e}),n.hide(),s.success("User has been created successfully.")):0==e.status&&(a.registerUserErrors=e.message)})},a.deleteUser=function(e){d.deleteUser(e).then(function(e){1==e.status?(d.getUsers().then(function(e){a.gridUsers.data=e}),n.hide(),s.success(e.message)):s.error(e.message)})},a.activateUser=function(e){d.activateUser(e).then(function(e){1==e.status?(d.getUsers().then(function(e){a.gridUsers.data=e}),s.success(e.message)):s.error(e.message)})},a.addAgency=function(){d.saveAgency(a.agency).then(function(e){1==e.status?(d.getAgencies().then(function(e){a.gridAgency.data=e}),n.hide(),s.success(e.message)):0==e.status&&(a.addAgencyErrors=e.message)},function(e){s.error("somthing went wrong try agin later!")})},a.cancel=function(){n.cancel()};var o=a;o.limit=5,a.loadMore=function(){var e=o.limit+5;o.limit=e>a.userList.length?a.userList.length:e}}]);
app.controller("subscribersCtrl",["$scope","$http",function(a,e){a.gridSubscribers={paginationPageSizes:[25,50,75],paginationPageSize:25,enableCellEditOnFocus:!1,multiSelect:!1,enableFiltering:!0,enableSorting:!0,showColumnMenu:!1,enableGridMenu:!0,enableRowSelection:!0,enableRowHeaderSelection:!1},a.gridSubscribers.columnDefs=[{name:"id",displayName:"Sr.no",enableCellEdit:!1,width:"20%",enableFiltering:!1},{name:"email",displayName:"Email Id",width:"40%",enableCellEdit:!1},{name:"Action",field:"Action",width:"40%",cellTemplate:'<div class="ui-grid-cell-contents"><span><a ng-href="#" ng-click=""><md-icon><i class="material-icons">remove_red_eye</i></md-icon></a></span></div>',enableFiltering:!1}],a.msg={},a.gridSubscribers.onRegisterApi=function(e){(a.gridApi=e).edit.on.afterCellEdit(a,function(e,i,n,l){a.msg.lastCellEdited="edited row id:"+e.id+" Column:"+i.name+" newValue:"+n+" oldValue:"+l,a.$apply()})},e.get("fakedb/company.json").success(function(e){for(i=0;i<e.length;i++)e[i].registered=new Date(e[i].registered);a.gridSubscribers.data=e})}]);
app.controller("OwnerCampaignCtrl",["$scope","$mdDialog","$mdSidenav","$interval","$stateParams","CampaignService","$window",function(i,e,t,a,n,s,r){i.CAMPAIGN_STATUS=["","Draft","Launch Requested","Running","Suspended","Stopped"],i.showPaymentdailog=function(){e.show({templateUrl:"views/updatepaymentDailog.html",fullscreen:i.customFullscreen,clickOutsideToClose:!0})},i.addCamapginSidenav=function(){t("ownerAddcmapgin").toggle()},i.cancel=function(){e.hide()},i.sharePerson=!1,i.shareCampaign=function(){i.sharePerson=!i.sharePerson},i.data={},i.uploadFile=function(e){if(i.data.fileName=e.files[0].name,e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("#photo-id").attr("src",e.target.result);var t=document.createElement("canvas"),a=document.createElement("img");a.setAttribute("src",e.target.result),t.width=a.width,t.height=a.height,t.getContext("2d").drawImage(a,0,0);t.toDataURL("image/jpeg");i.data.uploadedPhoto=e.target.result.replace(/data:image\/jpeg;base64,/g,"")},t.readAsDataURL(e.files[0])}},i.viewlocation=function(){r.open("#/location","_blank")},i.campaignDetails={},i.deleteProducts=function(e){var t=i.campaignDetails.indexOf(e);i.campaignDetails.splice(t,1)},i.limit=3,i.loadMore=function(){i.limit=i.items.length},i.items=[{campaignname:"Flipkart",clientcomapanyname:"Neon",clientname:"Chanikya",clientcontent:"9966016136",startdate:"12-Fed-2017",enddate:"28-Feb-2017",status:"Draft",price:"25000",products:"0"},{campaignname:"Amezon",clientcomapanyname:"Amezon",clientname:"shiva",clientcontent:"9966016136",startdate:"12-Fed-2017",enddate:"28-Feb-2017",status:"Draft",price:"30000",products:"0"},{campaignname:"Paytm",clientcomapanyname:"Paytm",clientname:"srikanth",clientcontent:"9966016136",startdate:"12-Fed-2017",enddate:"28-Feb-2017",status:"Draft",price:"50000",products:"0"}],i.hoardinglist=[{id:"AD_001",type:"Billboard",area:"Amreepet",size:"20*30",light:"No",sdate:"28-Feb-2017",edate:"28-April-2017",price:"30,000"},{id:"AD_002",type:"Unipole",area:"Amreepet",size:"20*30",light:"Yes",sdate:"28-Feb-2017",edate:"28-April-2017",price:"30,000"},{id:"AD_003",type:"Digital",area:"Amreepet",size:"20*30",light:"Yes",sdate:"28-Feb-2017",edate:"28-April-2017",price:"30,000"}],i.viewImage=function(){e.show({templateUrl:"views/owner/view-image.html",fullscreen:i.customFullscreen,clickOutsideToClose:!0})};var l=this,d=0,o=0;l.mode="query",l.activated=!0,l.determinateValue=30,l.determinateValue2=30,l.showList=[],l.toggleActivation=function(){l.activated||(l.showList=[]),l.activated&&(d=o=0,l.determinateValue=30,l.determinateValue2=30)},a(function(){l.determinateValue+=1,l.determinateValue2+=1.5,100<l.determinateValue&&(l.determinateValue=30),100<l.determinateValue2&&(l.determinateValue2=30),d<2&&!l.showList[d]&&l.activated&&(l.showList[d]=!0),o++%4==0&&d++,2==d&&(l.contained="indeterminate")},100,0,!0),a(function(){l.mode="query"==l.mode?"determinate":"query"},7200,0,!0),i.getUserCampaigns=function(){s.getCampaigns().then(function(e){i.plannedCampaigns=_.where(e,{status:1}),i.runningCampaigns=_.where(e,{status:3}),i.closedCampaigns=_.where(e,{status:5})})},i.getUserCampaigns(),i.getCampaignDetails=function(e){s.getCampaignWithProducts(e).then(function(e){i.campaignDetails=e})},n.campaignId&&i.getCampaignDetails(n.campaignId)}]);
app.controller("DashboardCtrl",["$scope",function(o){}]);
app.controller("feedback",["$scope","$mdDialog","Upload",function(t,a,l){t.uploadFiles=function(a,o){t.files=a,t.errFiles=o,angular.forEach(a,function(o){o.upload=l.upload({url:"https://angular-file-upload-cors-srv.appspot.com/upload",data:{file:o}}),o.upload.then(function(a){$timeout(function(){o.result=a.data})},function(a){0<a.status&&(t.errorMsg=a.status+": "+a.data)},function(a){o.progress=Math.min(100,parseInt(100*a.loaded/a.total))})})}}]);
app.controller("OwnerFeedsCtrl",["$scope","$mdDialog","$http","$mdSidenav","$location","AdminCampaignService","ProductService","toastr",function(o,a,t,e,i,n,r,s){o.msg={},o.limit=3,o.pageNo=1,o.productList=[],o.loadProductList=function(){r.getProductForPage(o.pageNo).then(function(t){if(localStorage.campaignForSuggestion){var e=JSON.parse(localStorage.campaignForSuggestion);e.products&&0<e.products.length&&_.map(t,function(t){if(void 0!==_.find(JSON.parse(localStorage.campaignForSuggestion).products,{id:t.id}))return t.alreadyAdded=!0,t})}o.pageNo+=1,o.productList=o.productList.concat(t)})},o.loadProductList(),n.getAllCampaignRequests().then(function(t){o.requestList=t}),o.showCampaignDetailsPopup=function(t,e){o.selectedRequestDetails=e,a.show({templateUrl:"views/admin/campaign-details-popup.html",fullscreen:o.customFullscreen,clickOutsideToClose:!0,preserveScope:!0,scope:o})},o.closeCampaignRequestDetails=function(){a.hide()},o.suggestProductsForCampaign=function(){localStorage.campaignForSuggestion=JSON.stringify(o.selectedRequestDetails),i.path("/admin/suggest-products")},o.suggestProductForCampaign=function(e){if(localStorage.campaignForSuggestion){var t={campaign_id:JSON.parse(localStorage.campaignForSuggestion).id,product:{id:e.id,from_date:e.start_date,to_date:e.end_date,price:e.price}};n.proposeProductForCampaign(t).then(function(t){1==t.status?(n.getCampaignWithProducts(JSON.parse(localStorage.campaignForSuggestion).id).then(function(t){localStorage.campaignForSuggestion=JSON.stringify(t),_.map(o.productList,function(t){return t.id==e.id&&(t.alreadyAdded=!0),t})}),s.success(t.message)):s.error(t.message)})}else s.error("No Campaign is seleted. Please select which campaign you're adding this product in to.")},o.removeProductFromCampaignSuggestion=function(e){var t=JSON.parse(localStorage.campaignForSuggestion).id;n.deleteProductFromCampaign(t,e).then(function(t){1==t.status&&(n.getCampaignWithProducts(JSON.parse(localStorage.campaignForSuggestion).id).then(function(t){localStorage.campaignForSuggestion=JSON.stringify(t)}),_.map(o.productList,function(t){return t.id==e&&(t.alreadyAdded=!1),t}))})},o.loadMore=function(){o.limit=o.items.length},o.shortlistProduct=function(){e("shortlistAndSaveOwnerSidenav").toggle()},o.addProductOwner=function(){e("addProductOwnerSidenav").toggle()},o.shareProducts=function(){e("shareProductOwner").toggle()}}]);
app.controller("OwnerHomeController",["$scope",function(a){var e={type:"google.charts.Bar",displayed:!1,data:{cols:[{id:"month",label:"Month",type:"string"},{id:"Available-id",label:"Available",type:"number"},{id:"Booked-id",label:"Booked",type:"number"},{id:"Total-id",label:"Total",type:"number"}],rows:[{c:[{v:"January"},{v:19,f:"19 hoardings"},{v:12,f:"12 hoardings"},{v:31,f:"31 hoardings"}]},{c:[{v:"February"},{v:13,f:"13 hoardings"},{v:19,f:"19 hoardings"},{v:32,f:"32 hoardings"}]},{c:[{v:"March"},{v:24,f:"24 hoardings"},{v:5,f:"5 hoardings"},{v:29,f:"29 hoardings"}]},{c:[{v:"April"},{v:13,f:"13 hoardings"},{v:19,f:"19 hoardings"},{v:32,f:"32 hoardings"}]}]},options:{title:"Sales per month",isStacked:"true",fill:20,displayExactValues:!0,vAxis:{title:"Sales unit",gridlines:{count:10}},hAxis:{title:"Date"}}};a.myChart=e}]).value("googleChartApiConfig",{version:"1.1",optionalSettings:{packages:["bar"],language:"en"}});
app.controller("HomeCtrl",["$scope",function(a){var i={type:"google.charts.Bar",displayed:!1,data:{cols:[{id:"month",label:"Month",type:"string"},{id:"Available-id",label:"Available",type:"number"},{id:"Booked-id",label:"Booked",type:"number"},{id:"Total-id",label:"Total",type:"number"}],rows:[{c:[{v:"January"},{v:19,f:"19 hoardings"},{v:12,f:"12 hoardings"},{v:31,f:"31 hoardings"}]},{c:[{v:"February"},{v:13,f:"13 hoardings"},{v:19,f:"19 hoardings"},{v:32,f:"32 hoardings"}]},{c:[{v:"March"},{v:24,f:"24 hoardings"},{v:5,f:"5 hoardings"},{v:29,f:"29 hoardings"}]},{c:[{v:"April"},{v:13,f:"13 hoardings"},{v:19,f:"19 hoardings"},{v:32,f:"32 hoardings"}]}]},options:{title:"Sales per month",isStacked:"true",fill:20,displayExactValues:!0,vAxis:{title:"Sales unit",gridlines:{count:10}},hAxis:{title:"Date"}}};a.myChart=i}]).value("googleChartApiConfig",{version:"1.1",optionalSettings:{packages:["bar"],language:"en"}});
app.controller("outSourcing",["$scope","$mdDialog","$mdSidenav",function(a,o,n){a.addOutsourcingAgent=function(){n("ownerAddAgency").toggle()},a.showBillboardsData=!0,a.showUnipoleData=!1,a.showdigitalData=!1,a.showBillboards=function(){a.showBillboardsData=!0,a.showUnipoleData=!1,a.showdigitalData=!1},a.unipole=function(){a.showBillboardsData=!1,a.showUnipoleData=!0,a.showdigitalData=!1},a.showtransit=function(){a.showBillboardsData=!1,a.showUnipoleData=!1,a.showdigitalData=!0},a.teamlist=[{sno:"1",comapanyname:"Chanikya",typeofcompany:"Neon",agentname:"srikanth",phone:"8899667755",email:"chanikya@Billboards.com",address:"Amreepet"},{sno:"2",comapanyname:"Chanikya",typeofcompany:"Neon",agentname:"srikanth",phone:"8899667755",email:"chanikya@Billboards.com",address:"Amreepet"},{sno:"3",comapanyname:"Chanikya",typeofcompany:"Neon",agentname:"srikanth",phone:"8899667755",email:"chanikya@Billboards.com",address:"Amreepet"}]}]);
app.controller("OwnerMngrCtrl",["$scope","$mdSidenav","$log","$mdDialog","$state",function(e,i,o,a,n){var t={type:"google.charts.Bar",displayed:!1,data:{cols:[{id:"month",label:"Month",type:"string"},{id:"Available-id",label:"Available",type:"number"},{id:"Booked-id",label:"Booked",type:"number"},{id:"Total-id",label:"Total",type:"number"}],rows:[{c:[{v:"January"},{v:19,f:"19 hoardings"},{v:12,f:"12 hoardings"},{v:31,f:"31 hoardings"}]},{c:[{v:"February"},{v:13,f:"13 hoardings"},{v:19,f:"19 hoardings"},{v:32,f:"32 hoardings"}]},{c:[{v:"March"},{v:24,f:"24 hoardings"},{v:5,f:"5 hoardings"},{v:29,f:"29 hoardings"}]},{c:[{v:"April"},{v:13,f:"13 hoardings"},{v:19,f:"19 hoardings"},{v:32,f:"32 hoardings"}]}]},options:{title:"Sales per month",isStacked:"true",fill:20,displayExactValues:!0,vAxis:{title:"Sales unit",gridlines:{count:10}},hAxis:{title:"Date"}}};e.myChart=t,e.ownerSidenav=function(){i("ownerLeft").toggle()},e.ownerRightSidenav=function(){i("ownerRight").toggle()},e.editProfieSidenav=function(){i("ownereditProfile").toggle()},e.openHelpScreen=function(e){a.show({templateUrl:"views/owner/helpnsupport.html",clickOutsideToClose:!0})}}]).value("googleChartApiConfig",{version:"1.1",optionalSettings:{packages:["bar"],language:"en"}});
app.controller("requestHoarding",["$scope","$mdDialog","$mdSidenav","$window",function(e,i,t,r){e.openScreen=function(e){i.show({templateUrl:"views/owner/requesthoardingadd.html",clickOutsideToClose:!0})},e.viewImage=function(){i.show({templateUrl:"views/owner/view-image.html",fullscreen:e.customFullscreen,clickOutsideToClose:!0})},e.addRequestHoarding=function(){t("ownerAddHoarding").toggle()},e.hoardinglist=[{id:"AD_001",type:"Billboard",area:"Amreepet",size:"20*30",light:"No",sdate:"28-Feb-2017",edate:"28-April-2017",price:"30,000"},{id:"AD_002",type:"Unipole",area:"Amreepet",size:"20*30",light:"Yes",sdate:"28-Feb-2017",edate:"28-April-2017",price:"30,000"},{id:"AD_003",type:"Digital",area:"Amreepet",size:"20*30",light:"Yes",sdate:"28-Feb-2017",edate:"28-April-2017",price:"30,000"}]}]);
app.controller("ownerSigninCtrl",["$scope","$mdDialog","$mdSidenav",function(n,o,i){}]);
app.controller("teamPage",["$scope","$mdDialog",function(e,i){e.teammembers=[{image:"team",name:"Shiva Shankar Reddy",designation:"Designer",phone:"8899667755",email:"siva@billboardsindia.com"},{image:"teamfour",name:"Srikanth Bijjala",designation:"Developer",phone:"9966016136",email:"srikanth@billboardsindia.com"},{image:"teamfour",name:"srikanth",designation:"Designer",phone:"8899667755",email:"teamfour@billboardsindia.com"},{image:"teamfour",name:"srikanth",designation:"Designer",phone:"8899667755",email:"teamfour@billboardsindia.com"}],e.openAddteam=function(e){i.show({templateUrl:"views/owner/teamadd.html",clickOutsideToClose:!0})},e.ownerTeamprofile=function(e){i.show({templateUrl:"views/owner/team-members.html",clickOutsideToClose:!0})},e.ownerProfilesetting=function(e){i.show({templateUrl:"views/owner/owner-teamsettings.html",clickOutsideToClose:!0})}}]);
app.directive("onEnter",function(){return function(n,e,r){e.bind("keydown keypress",function(e){13===e.which&&(n.$apply(function(){n.$eval(r.onEnter,{event:e})}),e.preventDefault())})}}),app.directive("onlyNumeric",function(){return{require:"ngModel",link:function(e,n,r,i){i.$parsers.push(function(e){if(e){var n=e.replace(/[^0-9]/g,"");return n!==e&&(i.$setViewValue(n),i.$render()),n}})}}});
app.filter("PickFirstLetter",function(){return function(t){return(t=t||"").substring(0,1)}}),app.filter("PickFirst2Letters",function(){return function(t){return(t=t||"").substring(0,2).toUpperCase()}}),app.filter("mapGender",function(){var e={1:"male",2:"female"};return function(t){return t?e[t]:""}}),app.filter("mapStatus",function(){var e={1:"Bachelor",2:"Nubile",3:"Married"};return function(t){return t?e[t]:""}}),app.filter("address",function(){return function(t){return t.street+", "+t.city+", "+t.state+", "+t.zip}}),app.filter("dateify",function(){return function(t){return t?moment(t).local().format("DD-MM-YYYY"):"N/A"}}),app.filter("stringifyCampaignStatus",function(){return function(t){switch(t){case 0:returnStatus="Requested Suggestion";break;case 1:returnStatus="Preparing";break;case 2:returnStatus="Prepared";break;case 3:returnStatus="Quote Requested";break;case 4:returnStatus="Quote Provided";break;case 5:returnStatus="Quote Change Requested";break;case 6:returnStatus="Launch Requested";break;case 7:returnStatus="Running";break;case 8:returnStatus="Suspended";break;case 9:returnStatus="Closed";break;default:return"Unknown"}return returnStatus}}),app.filter("boolToYesNo",function(){return function(t){return t?"Yes":"No"}});
app.service("LoadingInterceptor",["$q","$rootScope","$log","$injector","$timeout","$location",function(n,o,r,a,i,e){"use strict";return{request:function(e){return e.skipInterceptor||(o.loading=!0),e},requestError:function(e){return o.loading=!1,r.error("Request error:",e),n.reject(e)},response:function(e){return o.loading=!1,e},responseError:function(e){o.loading=!1;var r=a.get("toastr"),t=a.get("$mdDialog");return 401==e.status?localStorage.signInOpened&&JSON.parse(localStorage.signInOpened)&&(o.isAuthenticated=!1,localStorage.clear(),r.error("Your session has expired. Please login again."),i(function(){t.show({templateUrl:"views/sign-in.html",fullscreen:!0}).then(function(){localStorage.signInOpened=!1})},700),localStorage.signInOpened=!0):403==e.status&&r.error("You are not authorized to perform this action. Please contact admin."),n.reject(e)}}}]);
app.service("CampaignService",["$http","$q","config",function(t,a,o){return{getCampaigns:function(){var e=a.defer();return t.get(o.apiPath+"/campaigns").success(e.resolve).error(e.reject),e.promise},getPlannedCampaigns:function(){var e=a.defer();return t.get(o.apiPath+"/planned-campaigns").success(e.resolve).error(e.reject),e.promise},getCampaignWithProducts:function(e){var r=a.defer();return t.get(o.apiPath+"/campaign/"+e).success(r.resolve).error(r.reject),r.promise},saveCampaign:function(e){var r=a.defer();return t.post(o.apiPath+"/campaign",e).success(r.resolve).error(r.reject),r.promise},addProductToExistingCampaign:function(e){var r=a.defer();return t.post(o.apiPath+"/product-to-campaign",e).success(r.resolve).error(r.reject),r.promise},sendSuggestionRequest:function(e){var r=a.defer();return t.post(o.apiPath+"/suggestion-request",e).success(r.resolve).error(r.reject),r.promise},deleteCampaign:function(e){var r=a.defer();return t.delete(o.apiPath+"/campaign/"+e).success(r.resolve).error(r.reject),r.promise},shareCampaignToEmail:function(e){var r=a.defer();return t.post(o.apiPath+"/share-campaign",e).success(r.resolve).error(r.reject),r.promise},shareShortListedProducts:function(e){var r=a.defer();return t.post(o.apiPath+"/share-shortlisted",e).success(r.resolve).error(r.reject),r.promise},deleteProductFromCampaign:function(e,r){var s=a.defer();return t.delete(o.apiPath+"/campaign/"+e+"/product/"+r).success(s.resolve).error(s.reject),s.promise},exportCampaignsPdf:function(){var e=a.defer();return t.get(o.apiPath+"/export-all-campaigns",{responseType:"arraybuffer"}).success(e.resolve).error(e.reject),e.promise},requestCampaignProposal:function(e){var r=a.defer();return t.get(o.apiPath+"/request-proposal/"+e).success(r.resolve).error(r.reject),r.promise},requestLaunch:function(e){var r=a.defer();return t.get(o.apiPath+"/request-campaign-launch/"+e).success(r.resolve).error(r.reject),r.promise},requestChangeInQuote:function(e){var r=a.defer();return t.post(o.apiPath+"/request-quote-change",e).success(r.resolve).error(r.reject),r.promise}}}]);
app.factory("ContactService",["$http","$q","config",function(s,t,c){return{sendQuery:function(e){var r=t.defer();return s.post(c.apiPath+"/user-query",e).success(r.resolve).error(r.reject),r.promise},requestCallBack:function(e){var r=t.defer();return s.post(c.apiPath+"/request-callback",e).success(r.resolve).error(r.reject),r.promise},subscribe:function(e){var r=t.defer();return s.post(c.apiPath+"/subscription",e).success(r.resolve).error(r.reject),r.promise}}}]);
app.factory("LocationService",["$http","$q","config",function(t,s,o){return{getCountries:function(){var e=s.defer();return t.get(o.apiPath+"/countries").success(e.resolve).error(e.reject),e.promise},getStates:function(e){var r=s.defer();return t.get(o.apiPath+"/states/"+e).success(r.resolve).error(r.reject),r.promise},getCities:function(e){var r=s.defer();return t.get(o.apiPath+"/cities/"+e).success(r.resolve).error(r.reject),r.promise},getAreas:function(e){var r=s.defer();return t.get(o.apiPath+"/areas/"+e).success(r.resolve).error(r.reject),r.promise},getAreasWithAutocomplete:function(e){var r=s.defer();return t.get(o.apiPath+"/autocomplete-area/"+e).success(r.resolve).error(r.reject),r.promise}}}]);
app.factory("MapService",["$http","$q","config",function(s,o,c){return{markersForMap:function(){var r=o.defer();return s.get(c.apiPath+"/map-products").success(r.resolve).error(r.reject),r.promise},saveMarker:function(){markerObj={lat:61.62182,lng:20.306683};var r=o.defer();return s.post(c.apiPath+"/product",markerObj).success(r.resolve).error(r.reject),r.promise},getMarkers:function(){var r=o.defer();return s.get(c.apiPath+"/products").success(r.resolve).error(r.reject),r.promise},shortListProduct:function(r,e){var t=o.defer();return s.post(c.apiPath+"/shortlistProduct",{user_mongo_id:e,product_id:r}).success(t.resolve).error(t.reject),t.promise},getshortListProduct:function(r){var e=o.defer();return s.get(c.apiPath+"/shortlistedProducts").success(e.resolve).error(e.reject),e.promise},deleteShortlistedProduct:function(r,e){var t=o.defer();return s.delete(c.apiPath+"/shortlistedProduct/"+e).success(t.resolve).error(t.reject),t.promise},filterProducts:function(r){var e=o.defer();return s.post(c.apiPath+"/filterProducts",r).success(e.resolve).error(e.reject),e.promise},getIndustrySectors:function(){var r=o.defer();return s.get(c.apiPath+"/Sectors").success(r.resolve).error(r.reject),r.promise},getDurationSectors:function(){var r=o.defer();return s.get(c.apiPath+"/DurationSectors").success(r.resolve).error(r.reject),r.promise},searchBySiteNo:function(r){var e=o.defer();return s.get(c.apiPath+"/searchBySiteNo/"+r).success(e.resolve).error(e.reject),e.promise}}}]);
app.service("NotificationService",["$http","$q","config",function(r,i,o){return{getAllNotifications:function(e){var t=i.defer();return r.get(o.apiPath+"/all-notifications/last-notif/"+e,{skipInterceptor:!0}).success(t.resolve).error(t.reject),t.promise},updateNotifRead:function(e){var t=i.defer();return r.get(o.apiPath+"/update-notification-read/"+e,{skipInterceptor:!0}).success(t.resolve).error(t.reject),t.promise}}}]);
app.service("UserService",["$http","$q","config",function(s,t,o){return{logout:function(){var e=t.defer();return s.get(o.apiPath+"/logout").success(e.resolve).error(e.reject),e.promise},getAllUsers:function(){var e=t.defer();return s.get(o.apiPath+"/users").success(e.resolve).error(e.reject),e.promise},registerUser:function(e){var r=t.defer();return s.post(o.apiPath+"/user",e).success(r.resolve).error(r.reject),r.promise},isMailVerified:function(e){var r=t.defer();return s.get(o.apiPath+"/verify-email/"+e).success(r.resolve).error(r.reject),r.promise},getProfile:function(){var e=t.defer();return s.get(o.apiPath+"/user-profile").success(e.resolve).error(e.reject),e.promise},requestResetPassword:function(e){var r=t.defer();return s.post(o.apiPath+"/request-reset-password",e).success(r.resolve).error(r.reject),r.promise},resetPassword:function(e){var r=t.defer();return s.post(o.apiPath+"/reset-password",e).success(r.resolve).error(r.reject),r.promise},changePassword:function(e){var r=t.defer();return s.post(o.apiPath+"/change-password",e).success(r.resolve).error(r.reject),r.promise}}}]);
app.factory("AdminLocationService",["$http","$q","config",function(t,s,o){return{getCountries:function(){var e=s.defer();return t.get(o.apiPath+"/countries").success(e.resolve).error(e.reject),e.promise},getStates:function(e){var r=s.defer();return t.get(o.apiPath+"/states/"+e).success(r.resolve).error(r.reject),r.promise},getAllStates:function(){var e=s.defer();return t.get(o.apiPath+"/states").success(e.resolve).error(e.reject),e.promise},getCities:function(e){var r=s.defer();return t.get(o.apiPath+"/cities/"+e).success(r.resolve).error(r.reject),r.promise},getAllCities:function(){var e=s.defer();return t.get(o.apiPath+"/allCities").success(e.resolve).error(e.reject),e.promise},getAreas:function(e){var r=s.defer();return t.get(o.apiPath+"/areas/"+e).success(r.resolve).error(r.reject),r.promise},getAllAreas:function(){var e=s.defer();return t.get(o.apiPath+"/allAreas").success(e.resolve).error(e.reject),e.promise},saveCountry:function(e){var r=s.defer();return t.post(o.apiPath+"/country",{country_name:e}).success(r.resolve).error(r.reject),r.promise},saveState:function(e){var r=s.defer();return t.post(o.apiPath+"/state",e).success(r.resolve).error(r.reject),r.promise},saveCity:function(e){var r=s.defer();return t.post(o.apiPath+"/city",e).success(r.resolve).error(r.reject),r.promise},saveArea:function(e){var r=s.defer();return t.post(o.apiPath+"/area",e).success(r.resolve).error(r.reject),r.promise},deleteCountry:function(e){var r=s.defer();return t.delete(o.apiPath+"/country/"+e).success(r.resolve).error(r.reject),r.promise},deleteState:function(e){var r=s.defer();return t.delete(o.apiPath+"/state/"+e).success(r.resolve).error(r.reject),r.promise},deleteCity:function(e){var r=s.defer();return t.delete(o.apiPath+"/city/"+e).success(r.resolve).error(r.reject),r.promise},deleteArea:function(e){var r=s.defer();return t.delete(o.apiPath+"/area/"+e).success(r.resolve).error(r.reject),r.promise}}}]);
app.service("AdminCampaignService",["$http","$q","config",function(t,s,n){return{getAllCampaigns:function(){var e=s.defer();return t.get(n.apiPath+"/get-all-campaigns").success(e.resolve).error(e.reject),e.promise},getAllCampaignRequests:function(){var e=s.defer();return t.get(n.apiPath+"/all-campaign-requests").success(e.resolve).error(e.reject),e.promise},getProposedCampaigns:function(){var e=s.defer();return t.get(n.apiPath+"/all-campaigns/planning").success(e.resolve).error(e.reject),e.promise},getPlannedCampaigns:function(){var e=s.defer();return t.get(n.apiPath+"/all-campaigns/planned").success(e.resolve).error(e.reject),e.promise},saveCampaign:function(e){var r=s.defer();return t.post(n.apiPath+"/campaign",e).success(r.resolve).error(r.reject),r.promise},sendSuggestionRequest:function(e){var r=s.defer();return t.post(n.apiPath+"/suggestion-request",e).success(r.resolve).error(r.reject),r.promise},deleteCampaign:function(e){var r=s.defer();return t.post(n.apiPath+"/campaign/"+campaignId).success(r.resolve).error(r.reject),r.promise},proposeProductForCampaign:function(e){var r=s.defer();return t.post(n.apiPath+"/propose-product-for-campaign",e).success(r.resolve).error(r.reject),r.promise},deleteProductFromCampaign:function(e,r){var a=s.defer();return t.delete(n.apiPath+"/campaign/"+e+"/product/"+r).success(a.resolve).error(a.reject),a.promise},getCampaignWithProducts:function(e){var r=s.defer();return t.get(n.apiPath+"/campaign/"+e).success(r.resolve).error(r.reject),r.promise},updateProposedProduct:function(e,r){var a=s.defer();return t.put(n.apiPath+"/proposed-product-for-campaign/"+e,r).success(a.resolve).error(a.reject),a.promise},finalizeCampaignByAdmin:function(e){var r=s.defer();return t.get(n.apiPath+"/quote-campaign/"+e).success(r.resolve).error(r.reject),r.promise},launchCampaign:function(e){var r=s.defer();return t.get(n.apiPath+"/launch-campaign/"+e).success(r.resolve).error(r.reject),r.promise},getCampaignPaymentDetails:function(e){var r=s.defer();return t.get(n.apiPath+"/campaign-payments/"+e).success(r.resolve).error(r.reject),r.promise},updateCampaignPayment:function(e){var r=s.defer();return t.post(n.apiPath+"/campaign-payment",e).success(r.resolve).error(r.reject),r.promise},closeCampaign:function(e){var r=s.defer();return t.get(n.apiPath+"/close-campaign/"+e).success(r.resolve).error(r.reject),r.promise}}}]);
app.service("CompanyService",["$http","$q","config",function(o,a,n){return{getCompanies:function(){var e=a.defer();return o.get(n.apiPath+"/companies").success(e.resolve).error(e.reject),e.promise},getHoardingCompanies:function(){var e=a.defer();return o.get(n.apiPath+"/hoarding-companies").success(e.resolve).error(e.reject),e.promise},saveCompany:function(e){var r=a.defer();return o.post(n.apiPath+"/company",e).success(r.resolve).error(r.reject),r.promise},saveHoardingCompany:function(e){var r=a.defer();return o.post(n.apiPath+"/hoarding-company",e).success(r.resolve).error(r.reject),r.promise},deleteHoardingCompanies:function(e){var r=a.defer();return o.delete(n.apiPath+"/hoarding-companies/"+formatId).success(r.resolve).error(r.reject),r.promise}}}]);
app.service("AdminNotificationService",["$http","$q","config",function(i,r,n){return{getAllAdminNotifications:function(e){var t=r.defer();return i.get(n.apiPath+"/all-admin-notifications/last-notif/"+e,{skipInterceptor:!0}).success(t.resolve).error(t.reject),t.promise},updateNotifRead:function(e){var t=r.defer();return i.get(n.apiPath+"/update-notification-read/"+e,{skipInterceptor:!0}).success(t.resolve).error(t.reject),t.promise}}}]);
app.factory("ProductService",["$http","$q","config",function(t,o,c){return{getProductList:function(){var e=o.defer();return t.get(c.apiPath+"/products").success(e.resolve).error(e.reject),e.promise},getProductForPage:function(e){var r=o.defer();return t.get(c.apiPath+"/products/"+e).success(r.resolve).error(r.reject),r.promise},getFormatList:function(){var e=o.defer();return t.get(c.apiPath+"/formats").success(e.resolve).error(e.reject),e.promise},deleteProduct:function(e){var r=o.defer();return t.delete(c.apiPath+"/product/"+e).success(r.resolve).error(r.reject),r.promise},deleteFormat:function(e){var r=o.defer();return t.delete(c.apiPath+"/format/"+e).success(r.resolve).error(r.reject),r.promise},searchProducts:function(e){var r=o.defer();return t.get(c.apiPath+"/search-products/"+e).success(r.resolve).error(r.reject),r.promise}}}]);
app.service("AdminUserService",["$http","$q","config",function(s,t,c){return{getUsers:function(){var e=t.defer();return s.get(c.apiPath+"/users").success(e.resolve).error(e.reject),e.promise},getAgencies:function(){var e=t.defer();return s.get(c.apiPath+"/agencies").success(e.resolve).error(e.reject),e.promise},saveUser:function(e){var r=t.defer();return s.post(c.apiPath+"/userByAdmin",e).success(r.resolve).error(r.reject),r.promise},saveAgency:function(e){var r=t.defer();return s.post(c.apiPath+"/agencyByAdmin",e).success(r.resolve).error(r.reject),r.promise},activateUser:function(e){var r=t.defer();return s.get(c.apiPath+"/activate-user/"+e).success(r.resolve).error(r.reject),r.promise},deleteUser:function(e){var r=t.defer();return s.get(c.apiPath+"/delete-user/"+e).success(r.resolve).error(r.reject),r.promise}}}]);